!function(){"use strict";class e{constructor(e,t,r,s,n,i){let{name:o,link:a,_id:l,isLiked:c}=e;this._name=o,this._link=a,this._id=l,this._isLiked=c,this._cardSelector=t,this._clickHandler=r,this._deletePopup=s,this._handleDelete=n,this._handleLike=i}getId(){return this._id}_setEventListeners(){this._cardElement.querySelector(".card__button-like").addEventListener("click",(()=>{this._handleLike()})),this._cardElement.querySelector(".card__button-delete").addEventListener("click",(()=>{this._handleDelete()})),this._cardImageElement.addEventListener("click",(()=>{this._clickHandler({name:this._name,link:this._link})}))}likeHandler(){this._cardElement.querySelector(".card__button-like").classList.toggle("card__button-like_active")}deleteHandler(){this._cardElement.remove(),this._cardElement=null}getNewCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._cardImageElement.alt=this._name,this._cardImageElement.src=this._link,this._cardTitleElement.textContent=this._name,this._isLiked&&this._cardElement.querySelector(".card__button-like").classList.add("card__button-like_active"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.add(this._errorClass)}_hideInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.remove(this._errorClass)}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_changeButtonState(){let e=!1;this._inputElements.forEach((t=>{t.validity.valid||(e=!0)})),e?this._disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkValidity(e),this._changeButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&(e.preventDefault(),this.close())};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class s extends r{constructor(e,t,r){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitType=r,this._submitBtn=this._popupElement.querySelector(".modal__button")}getInputValues(){return Array.from(this._popupForm.querySelectorAll(".modal__input")).reduce(((e,t)=>({...e,[t.name]:t.value})),{})}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this.getInputValues())})),super.setEventListeners()}loadingButtonState(){this._submitBtn.textContent="Saving..."}resetButtonState(){this._submitBtn.textContent=`${this._submitType}`}}const n=document.querySelector(".cards__list"),i=(document.querySelector("#profile-name"),document.querySelector("#profile-about"),document.querySelector("#profile-avatar")),o=document.querySelector("#profile-picture-edit-btn"),a=document.querySelector("#profile-picture-form"),l=document.querySelector("#profile-picture-input"),c=document.querySelector("#profile-edit-btn"),d=document.querySelector("#profile-edit-form"),h=document.querySelector("#profile-title-input"),u=document.querySelector("#profile-description-input"),_=document.querySelector("#profile-add-btn"),m=document.querySelector("#profile-add-modal").querySelector("#card-add-form"),p=(m.querySelector("#profile-add-title-input"),m.querySelector("#profile-add-url-input"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error",errorClass:"modal__error_visible"}),E={baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"97f6b443-08dd-4f1c-9189-025b318b185d","Content-Type":"application/json"}},f=new class{constructor(){this._baseUrl=E.baseUrl,this._baseHeaders=E.headers,this._userPath=`${this._baseUrl}/users/me`,this._cardPath=`${this._baseUrl}/cards`}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}logError(e){console.error(e)}returnPromises(e){let[t,r]=e;return Promise.all([t,r])}getInitialCards(){return fetch(this._cardPath,{method:"GET",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}addNewCard(e){let{name:t,link:r}=e;return fetch(this._cardPath,{method:"POST",headers:this._baseHeaders,body:JSON.stringify({name:t,link:r})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch(`${this._cardPath}/${e}`,{method:"DELETE",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}addCardLike(e){return fetch(`${this._cardPath}/${e}/likes`,{method:"PUT",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}removeCardLike(e){return fetch(`${this._cardPath}/${e}/likes`,{method:"DELETE",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch(this._userPath,{method:"GET",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}setUserInfo(e){let{name:t,about:r}=e;return fetch(this._userPath,{method:"PATCH",headers:this._baseHeaders,body:JSON.stringify({name:t,about:r})}).then((e=>this._checkResponse(e)))}setProfilePicture(e){return fetch(`${this._userPath}/avatar`,{method:"PATCH",headers:this._baseHeaders,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponse(e)))}}(E),S=new class extends r{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#card-preview-image"),this._previewTitle=this._popupElement.querySelector("#card-preview-title")}open=e=>{let{name:t,link:r}=e;this._previewImage.src=r,this._previewImage.alt=`${t}`,this._previewTitle.textContent=`${t}`,super.open()}}("#card-preview-modal");S.setEventListeners();const v=new class{constructor(e,t){let{renderer:r}=e;this._renderer=r,this._container=t}renderItems(e){e.forEach((e=>(this._renderer(e),e)))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=g(e);v.addItem(t)}},n);f.getInitialCards().then((e=>{v.renderItems(e)})).catch((e=>{console.error(e)}));const b=new class{constructor(e,t,r){this._profileName=document.querySelector(e),this._profileJob=document.querySelector(t),this._profileAvatar=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}setUserAvatar(e){this._profileAvatar.src=e}}("#profile-name","#profile-about","#profile-avatar");f.getUserInfo().then((e=>{b.setUserInfo(e.name,e.about),b.setUserAvatar(e.avatar)})).catch((e=>{console.error(e)}));const y=new s("#profile-edit-modal",(e=>{y.loadingButtonState(),f.setUserInfo({name:e.name,about:e.job}).then((e=>{b.setUserInfo(e.name,e.about),y.close()})).catch((e=>{console.error(e)})).finally((()=>{y.resetButtonState()}))}),"Save");y.setEventListeners(),c.addEventListener("click",(()=>{const{name:e,job:t}=b.getUserInfo();h.value=e,u.value=t,y.open()}));const k=new s("#profile-picture-edit-modal",(()=>{k.loadingButtonState(),f.setProfilePicture(l.value).then((e=>{i.src=e.avatar,k.close()})).catch((e=>{console.error(e)})).finally((()=>{k.resetButtonState()}))}),"Save");k.setEventListeners(),o.addEventListener("click",(()=>{k.open()}));const L=new s("#profile-add-modal",(e=>{let{title:t,url:r}=e;L.loadingButtonState(),f.addNewCard({name:t,link:r}).then((e=>{const t=g(e);v.addItem(t),L.close()})).catch((e=>{console.error(e)})).finally((()=>{L.resetButtonState()}))}),"Create");L.setEventListeners(),_.addEventListener("click",(()=>{L.open()}));const C=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#confirm-delete-form"),this._confirmBtn=this._popupElement.querySelector("#delete-card-btn")}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()})),super.setEventListeners()}loadingButtonState(){this._confirmBtn.textContent="Deleting..."}resetButtonState(){this._confirmBtn.textContent="Yes"}}("#card-delete-modal");function g(t){const r=new e(t,"#card-template",(()=>{S.open(t)}),C,(()=>{const e=r.getId();C.open(),C.setSubmitAction((()=>{C.loadingButtonState(),f.deleteCard(e).then((()=>{r.deleteHandler(),C.close(),C.resetButtonState()})).catch((e=>{console.error(e)}))}))}),(()=>{const e=r.getId();t.isLiked?f.removeCardLike(e).then((()=>{r.likeHandler()})).catch((e=>{console.error(e)})):f.addCardLike(e).then((()=>{r.likeHandler()})).catch((e=>{console.error(e)}))}));return r.getNewCard()}C.setEventListeners();const q=new t(p,d),B=new t(p,m),I=new t(p,a);q.enableValidation(),B.enableValidation(),I.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxFQUNBa0UsR0FHRnlGLEVBQXNCekgsbUJBQ3RCMEgsRUFBa0IxSCxtQkFDbEIySCxFQUF5QjNILGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgY2xpY2tIYW5kbGVyLFxyXG4gICAgZGVsZXRlUG9wdXAsXHJcbiAgICBoYW5kbGVEZWxldGUsXHJcbiAgICBoYW5kbGVMaWtlXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faWQgPSBfaWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NsaWNrSGFuZGxlciA9IGNsaWNrSGFuZGxlcjtcclxuICAgIHRoaXMuX2RlbGV0ZVBvcHVwID0gZGVsZXRlUG9wdXA7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlID0gaGFuZGxlTGlrZTtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsZXRlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NsaWNrSGFuZGxlcih7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tbGlrZV9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXROZXdDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAvLyBGaXJzdCBwYXJhbWV0ZXIgc3RvcmVzIHNlbGVjdG9ycyBhbmQgZm9ybSBjbGFzc2VzXHJcbiAgLy8gU2Vjb25kIHRha2VzIHRoZSBmb3JtIGJlaW5nIHZhbGlkYXRlZFxyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gb3B0aW9ucy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIC8vIGxvb2sgZm9yIGlucHV0cyBpbnNpZGUgb2YgZm9ybVxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICAvLyBnZXQgdmFsaWRhdGlvbiBtZXNzYWdlXHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIC8vIGFkZCBlcnJvciBjbGFzcyB0byBpbnB1dFxyXG4gICAgLy8gZGlzcGxheSBlcnJvciBtZXNzYWdlXHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAvLyBsb29rIGZvciBpbnB1dHMgaW5zaWRlIG9mIGZvcm1cclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgLy8gcmVzZXQgZXJyb3IgbWVzc2FnZXNcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICAvLyBDaGVjayB2YWxpZGl0eSBvZiBzcGVjaWZpYyBmb3JtXHJcbiAgICAvLyBsb29wIHRocm91Z2ggYWxsIHRoZSBpbnB1dHMgdG8gc2VlIGlmIGFsbCBhcmUgdmFsaWRcclxuXHJcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIC8vIGlmIGlucHV0IGlzIG5vdCB2YWxpZFxyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBpZiBhbGwgaW5wdXRzIGFyZSB2YWxpZFxyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9jaGFuZ2VCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIENoYW5nZSBzdWJtaXQgYnV0dG9uIHN0YXRlIGFzIG5lZWRlZFxyXG5cclxuICAgIGxldCBmb3VuZEludmFsaWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIGZvdW5kSW52YWxpZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChmb3VuZEludmFsaWQpIHtcclxuICAgICAgLy8gZGlzYWJsZSBidXR0b25cclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gZW5hYmxlIGJ1dHRvblxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIEFkZCBhbGwgbmVlZGVkIGV2ZW50IGhhbmRsZXJzXHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIC8vIEVuYWJsZSB2YWxpZGF0aW9uIG9mIGVhY2ggZm9ybVxyXG4gICAgLy8gKERPIFRISVMgRk9SIEVBQ0ggRk9STSBORUVESU5HIFZBTElEQVRJT04pXHJcblxyXG4gICAgLy8gZW5hYmxpbmcgdmFsaWRhdGlvbiBieSBjYWxsaW5nIGVuYWJsZVZhbGlkYXRpb24oKVxyXG4gICAgLy8gcGFzcyBhbGwgdGhlIHNldHRpbmdzIG9uIGNhbGxcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vQWRkIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIGNsb3NlIGljb24gb2YgcG9wdXBcclxuXHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vQWRkIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIGNsb3NlIHRvIGFyZWEgb2YgcGFnZSBzaGFkZWQgZ3JheSB0byBjbG9zZSBwb3B1cFxyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIHN1Ym1pdFR5cGUpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRUeXBlID0gc3VibWl0VHlwZTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnJlZHVjZShcclxuICAgICAgKGFjY3VtdWxhdG9yLCBpbnB1dE5vZGUpID0+ICh7XHJcbiAgICAgICAgLi4uYWNjdW11bGF0b3IsXHJcbiAgICAgICAgW2lucHV0Tm9kZS5uYW1lXTogaW5wdXROb2RlLnZhbHVlLFxyXG4gICAgICB9KSxcclxuICAgICAge31cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGxvYWRpbmdCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgfVxyXG5cclxuICByZXNldEJ1dHRvblN0YXRlKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gYCR7dGhpcy5fc3VibWl0VHlwZX1gO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUdFTkVSSUMgRUxFTUVOVFMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tUFJPRklMRSBFRElUIE1PREFMIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFib3V0XCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhclwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLXBpY3R1cmUtZWRpdC1idG5cIlxyXG4pO1xyXG5jb25zdCBwcm9maWxlUGljdHVyZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXBpY3R1cmUtZm9ybVwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVGb3JtSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtcGljdHVyZS1pbnB1dFwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVBST0ZJTEUgQUREIE1PREFMIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYWRkQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnRuXCIpO1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIpO1xyXG5jb25zdCBjYXJkQWRkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLWZvcm1cIik7XHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gY2FyZEFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgY2FyZFVybElucHV0ID0gY2FyZEFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC11cmwtaW5wdXRcIik7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tVkFMSURBVElPTiBPUFRJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUFQSSBPUFRJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYXBpT3B0aW9ucyA9IHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI5N2Y2YjQ0My0wOGRkLTRmMWMtOTE4OS0wMjViMzE4YjE4NWRcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBjYXJkTGlzdCxcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQWJvdXQsXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBwcm9maWxlUGljdHVyZUVkaXRCdG4sXHJcbiAgcHJvZmlsZVBpY3R1cmVFZGl0Rm9ybSxcclxuICBwcm9maWxlUGljdHVyZUZvcm1JbnB1dCxcclxuICBwcm9maWxlRWRpdEJ0bixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkQ2FyZEJ0bixcclxuICBjYXJkQWRkRm9ybSxcclxuICBjYXJkVGl0bGVJbnB1dCxcclxuICBjYXJkVXJsSW5wdXQsXHJcbiAgb3B0aW9ucyxcclxuICBhcGlPcHRpb25zLFxyXG59O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgY2FyZExpc3QsXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZUFib3V0LFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbiAgcHJvZmlsZVBpY3R1cmVFZGl0QnRuLFxyXG4gIHByb2ZpbGVQaWN0dXJlRWRpdEZvcm0sXHJcbiAgcHJvZmlsZVBpY3R1cmVGb3JtSW5wdXQsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGFkZENhcmRCdG4sXHJcbiAgY2FyZEFkZEZvcm0sXHJcbiAgY2FyZFRpdGxlSW5wdXQsXHJcbiAgY2FyZFVybElucHV0LFxyXG4gIG9wdGlvbnMsXHJcbiAgYXBpT3B0aW9ucyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tQVBJIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaU9wdGlvbnMpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVBPUFVQV0lUSElNQUdFIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmQtcHJldmlldy1tb2RhbFwiKTtcclxuXHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1DQVJEU0VDVElPTiBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjYXJkTGlzdFxyXG4pO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkRGF0YSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVVTRVItSU5GTyBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgXCIjcHJvZmlsZS1uYW1lXCIsXHJcbiAgXCIjcHJvZmlsZS1hYm91dFwiLFxyXG4gIFwiI3Byb2ZpbGUtYXZhdGFyXCJcclxuKTtcclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLSBFRElUIFBST0ZJTEUgUE9QVVAtV0lUSC1GT1JNIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBlZGl0TW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICAodmFsdWVzKSA9PiB7XHJcbiAgICBlZGl0TW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcbiAgICBhcGlcclxuICAgICAgLnNldFVzZXJJbmZvKHsgbmFtZTogdmFsdWVzLm5hbWUsIGFib3V0OiB2YWx1ZXMuam9iIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmFib3V0KTtcclxuICAgICAgICBlZGl0TW9kYWwuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBlZGl0TW9kYWwucmVzZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIFwiU2F2ZVwiXHJcbik7XHJcblxyXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcblxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGpvYjtcclxuXHJcbiAgZWRpdE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tUFJPRklMRSBQSUNUVVJFIFBPUFVQLVdJVEgtRk9STSBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgcHJvZmlsZVBpY3R1cmVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtcGljdHVyZS1lZGl0LW1vZGFsXCIsXHJcbiAgKCkgPT4ge1xyXG4gICAgcHJvZmlsZVBpY3R1cmVNb2RhbC5sb2FkaW5nQnV0dG9uU3RhdGUoKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0UHJvZmlsZVBpY3R1cmUocHJvZmlsZVBpY3R1cmVGb3JtSW5wdXQudmFsdWUpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBwcm9maWxlQXZhdGFyLnNyYyA9IHJlcy5hdmF0YXI7XHJcbiAgICAgICAgcHJvZmlsZVBpY3R1cmVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlTW9kYWwucmVzZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIFwiU2F2ZVwiXHJcbik7XHJcblxyXG5wcm9maWxlUGljdHVyZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlUGljdHVyZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlUGljdHVyZU1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tQUREIENBUkQgUE9QVVAtV0lUSC1GT1JNIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBhZGRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXHJcbiAgKHsgdGl0bGUsIHVybCB9KSA9PiB7XHJcbiAgICBhZGRNb2RhbC5sb2FkaW5nQnV0dG9uU3RhdGUoKTtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkTmV3Q2FyZCh7IG5hbWU6IHRpdGxlLCBsaW5rOiB1cmwgfSlcclxuICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgICAgICAgYWRkTW9kYWwuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBhZGRNb2RhbC5yZXNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbiAgXCJDcmVhdGVcIlxyXG4pO1xyXG5cclxuYWRkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLURFTEVURSBDQVJEIFBPUFVQIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBkZWxldGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjY2FyZC1kZWxldGUtbW9kYWxcIik7XHJcblxyXG5kZWxldGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUZVTkNUSU9OUy0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBkYXRhLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgKCkgPT4ge1xyXG4gICAgICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XHJcbiAgICB9LFxyXG4gICAgZGVsZXRlTW9kYWwsXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkID0gY2FyZEVsZW1lbnQuZ2V0SWQoKTtcclxuXHJcbiAgICAgIGRlbGV0ZU1vZGFsLm9wZW4oKTtcclxuXHJcbiAgICAgIGRlbGV0ZU1vZGFsLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlTW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmRlbGV0ZUNhcmQoaWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LmRlbGV0ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgZGVsZXRlTW9kYWwuY2xvc2UoKTtcclxuICAgICAgICAgICAgZGVsZXRlTW9kYWwucmVzZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkID0gY2FyZEVsZW1lbnQuZ2V0SWQoKTtcclxuXHJcbiAgICAgIGlmICghZGF0YS5pc0xpa2VkKSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuYWRkQ2FyZExpa2UoaWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50Lmxpa2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAucmVtb3ZlQ2FyZExpa2UoaWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50Lmxpa2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXROZXdDYXJkKCk7XHJcbn1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1WQUxJREFUSU9OIElOU1RBTlRJQVRPUlMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5jb25zdCBhZGRDYXJkVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIGNhcmRBZGRGb3JtKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgb3B0aW9ucyxcclxuICBwcm9maWxlUGljdHVyZUVkaXRGb3JtXHJcbik7XHJcblxyXG5wcm9maWxlRWRpdFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRDYXJkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnByb2ZpbGVQaWN0dXJlVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiIsImltcG9ydCB7IGFwaU9wdGlvbnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYXBpT3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5fYmFzZUhlYWRlcnMgPSBhcGlPcHRpb25zLmhlYWRlcnM7XHJcbiAgICB0aGlzLl91c2VyUGF0aCA9IGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYDtcclxuICAgIHRoaXMuX2NhcmRQYXRoID0gYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgbG9nRXJyb3IoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfVxyXG5cclxuICByZXR1cm5Qcm9taXNlcyhbcHJvbWlzZTEsIHByb21pc2UyXSkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtwcm9taXNlMSwgcHJvbWlzZTJdKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9jYXJkUGF0aCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9jYXJkUGF0aCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9jYXJkUGF0aH0vJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2NhcmRQYXRofS8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fY2FyZFBhdGh9LyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl91c2VyUGF0aCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VzZXJQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9maWxlUGljdHVyZShsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXNlclBhdGh9L2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI2NhcmQtcHJldmlldy1pbWFnZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcHJldmlld1RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI2NhcmQtcHJldmlldy10aXRsZVwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbiA9ICh7IG5hbWUsIGxpbmsgfSkgPT4ge1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gYCR7bmFtZX1gO1xyXG4gICAgdGhpcy5fcHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gYCR7bmFtZX1gO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXIpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICByZXR1cm4gaXRlbTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IocHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IsIHByb2ZpbGVBdmF0YXIpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMgPSBkYXRhO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbGV0ZS1mb3JtXCIpO1xyXG4gICAgdGhpcy5fY29uZmlybUJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1jYXJkLWJ0blwiKTtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGxvYWRpbmdCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX2NvbmZpcm1CdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XHJcbiAgfVxyXG5cclxuICByZXNldEJ1dHRvblN0YXRlKCkge1xyXG4gICAgdGhpcy5fY29uZmlybUJ0bi50ZXh0Q29udGVudCA9IFwiWWVzXCI7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiY2xpY2tIYW5kbGVyIiwiZGVsZXRlUG9wdXAiLCJoYW5kbGVEZWxldGUiLCJoYW5kbGVMaWtlIiwibmFtZSIsImxpbmsiLCJfaWQiLCJpc0xpa2VkIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfaXNMaWtlZCIsIl9jYXJkU2VsZWN0b3IiLCJfY2xpY2tIYW5kbGVyIiwiX2RlbGV0ZVBvcHVwIiwiX2hhbmRsZURlbGV0ZSIsIl9oYW5kbGVMaWtlIiwiZ2V0SWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkSW1hZ2VFbGVtZW50IiwibGlrZUhhbmRsZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJkZWxldGVIYW5kbGVyIiwicmVtb3ZlIiwiZ2V0TmV3Q2FyZCIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGVFbGVtZW50IiwiYWx0Iiwic3JjIiwidGV4dENvbnRlbnQiLCJhZGQiLCJGb3JtVmFsaWRhdG9yIiwib3B0aW9ucyIsImZvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja1ZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9kaXNhYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2NoYW5nZUJ1dHRvblN0YXRlIiwiZm91bmRJbnZhbGlkIiwiX2lucHV0RWxlbWVudHMiLCJmb3JFYWNoIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImV2ZW50IiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdWJtaXRUeXBlIiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0VHlwZSIsIl9zdWJtaXRCdG4iLCJnZXRJbnB1dFZhbHVlcyIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwiaW5wdXROb2RlIiwidmFsdWUiLCJyZXNldCIsImxvYWRpbmdCdXR0b25TdGF0ZSIsInJlc2V0QnV0dG9uU3RhdGUiLCJjYXJkTGlzdCIsInByb2ZpbGVBdmF0YXIiLCJwcm9maWxlUGljdHVyZUVkaXRCdG4iLCJwcm9maWxlUGljdHVyZUVkaXRGb3JtIiwicHJvZmlsZVBpY3R1cmVGb3JtSW5wdXQiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJhZGRDYXJkQnRuIiwiY2FyZEFkZEZvcm0iLCJhcGlPcHRpb25zIiwiYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiYXBpIiwiX2Jhc2VVcmwiLCJfYmFzZUhlYWRlcnMiLCJfdXNlclBhdGgiLCJfY2FyZFBhdGgiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJsb2dFcnJvciIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInJldHVyblByb21pc2VzIiwicHJvbWlzZTEiLCJwcm9taXNlMiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImFkZE5ld0NhcmQiLCJfcmVmMiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZENhcmRMaWtlIiwicmVtb3ZlQ2FyZExpa2UiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiX3JlZjMiLCJhYm91dCIsInNldFByb2ZpbGVQaWN0dXJlIiwiYXZhdGFyIiwiaW1hZ2VQb3B1cCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld1RpdGxlIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXIiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZERhdGEiLCJuZXdDYXJkIiwicmVuZGVyQ2FyZCIsImNhdGNoIiwidXNlckluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsIl9wcm9maWxlQXZhdGFyIiwiam9iIiwic2V0VXNlckF2YXRhciIsImRhdGEiLCJ1c2VyRGF0YSIsImVkaXRNb2RhbCIsInZhbHVlcyIsImZpbmFsbHkiLCJwcm9maWxlUGljdHVyZU1vZGFsIiwiYWRkTW9kYWwiLCJ0aXRsZSIsInVybCIsImRlbGV0ZU1vZGFsIiwiX2NvbmZpcm1CdG4iLCJzZXRTdWJtaXRBY3Rpb24iLCJjYXJkRWxlbWVudCIsInByb2ZpbGVFZGl0VmFsaWRhdGlvbiIsImFkZENhcmRWYWxpZGF0aW9uIiwicHJvZmlsZVBpY3R1cmVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==