!function(){"use strict";class e{constructor(e,t,r){let{name:s,link:n}=e;this._name=s,this._link=n,this._cardSelector=t,this._clickHandler=r}_setEventListeners(){this._cardElement.querySelector(".card__button-like").addEventListener("click",(()=>{this._likeHandler()})),this._cardElement.querySelector(".card__button-delete").addEventListener("click",(()=>{this._deleteHandler()})),this._cardImageElement.addEventListener("click",(()=>{this._clickHandler({name:this._name,link:this._link})}))}_likeHandler(){this._cardElement.querySelector(".card__button-like").classList.toggle("card__button-like_active")}_deleteHandler(){this._cardElement.remove()}getNewCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._cardImageElement.alt=this._name,this._cardImageElement.src=this._link,this._cardTitleElement.textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.add(this._errorClass)}_hideInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.remove(this._errorClass)}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_changeButtonState(){let e=!1;this._inputElements.forEach((t=>{t.validity.valid||(e=!0)})),e?this._disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkValidity(e),this._changeButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._disableButton()})),this._setEventListeners()}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&(e.preventDefault(),this.close())};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class s extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}getInputValues(){return Array.from(this._popupForm.querySelectorAll(".modal__input")).reduce(((e,t)=>({...e,[t.name]:t.value})),{})}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this.getInputValues())})),super.setEventListeners()}}const n=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],i=document.querySelector(".cards__list"),o=document.querySelector("#profile-edit-btn"),l=document.querySelector("#profile-edit-form"),a=document.querySelector("#profile-title-input"),c=document.querySelector("#profile-description-input"),u=document.querySelector("#profile-add-btn"),d=document.querySelector("#profile-add-modal").querySelector("#card-add-form"),m=(d.querySelector("#profile-add-title-input"),d.querySelector("#profile-add-url-input"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error",errorClass:"modal__error_visible"}),p=new class extends r{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#card-preview-image"),this._previewTitle=this._popupElement.querySelector("#card-preview-title")}open=e=>{let{name:t,link:r}=e;this._previewImage.src=r,this._previewImage.alt=`${t}`,this._previewTitle.textContent=`${t}`,super.open()}}("#card-preview-modal");p.setEventListeners();const _=new class{constructor(e,t){let{items:r,renderer:s}=e;this._name=r.name,this._link=r.link,this._renderer=s,this._container=t}renderItems(e){e.forEach((e=>(this._renderer(e),e)))}addItem(e){this._container.prepend(e)}}({items:n,renderer:e=>{const t=v(e);_.addItem(t)}},i);_.renderItems(n);const h=new class{constructor(e){let{profileName:t,profileJob:r}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){this._profileName.textContent=e.name,this._profileJob.textContent=e.job}}({profileName:".profile__title",profileJob:".profile__description"}),E=new s("#profile-edit-modal",(e=>{h.setUserInfo(e),E.close()}));E.setEventListeners(),o.addEventListener("click",(()=>{const{name:e,job:t}=h.getUserInfo();a.value=e,c.value=t,E.open()}));const f=new s("#profile-add-modal",(()=>{const{title:e,url:t}=f.getInputValues(),r=v({name:e,link:t});_.addItem(r),f.close()}));function v(t){return new e(t,"#card-template",(()=>{p.open(t)})).getNewCard()}f.setEventListeners(),u.addEventListener("click",(()=>{f.open()}));const S=new t(m,l),b=new t(m,d);S.enableValidation(),b.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEsQ0FBWUMsR0FDVm5ILEtBQUs4RyxhQUFheEYsWUFBYzZGLEVBQUtySCxLQUNyQ0UsS0FBSytHLFlBQVl6RixZQUFjNkYsRUFBS0YsR0FDdEMsR0gwQjRCLENBQzVCTCxZQUFhLGtCQUNiQyxXQUFZLDBCQUtSTyxFQUFZLElBQUk1QyxFQUFjLHVCQUF3QjZDLElBQzFEVixFQUFTTyxZQUFZRyxHQUNyQkQsRUFBVWxELE9BQU8sSUFHbkJrRCxFQUFVL0Msb0JBRVZnQixFQUFlN0UsaUJBQWlCLFNBQVMsS0FDdkMsTUFBTSxLQUFFVixFQUFJLElBQUVtSCxHQUFRTixFQUFTSyxjQUUvQnpCLEVBQWtCTixNQUFRbkYsRUFDMUIwRixFQUF3QlAsTUFBUWdDLEVBRWhDRyxFQUFVcEQsTUFBTSxJQUtsQixNQUFNc0QsRUFBVyxJQUFJOUMsRUFBYyxzQkFBc0IsS0FDdkQsTUFBTSxNQUFFK0MsRUFBSyxJQUFFQyxHQUFRRixFQUFTekMsaUJBQzFCNEIsRUFBVUMsRUFBVyxDQUFFNUcsS0FBTXlILEVBQU94SCxLQUFNeUgsSUFDaEQxQixFQUFZUSxRQUFRRyxHQUNwQmEsRUFBU3BELE9BQU8sSUFXbEIsU0FBU3dDLEVBQVdTLEdBSWxCLE9BSG9CLElBQUkxSCxFQUFLMEgsRUFBTSxrQkFBa0IsS0FDbkR4QixFQUFXM0IsS0FBS21ELEVBQUssSUFFSnBHLFlBQ3JCLENBYkF1RyxFQUFTakQsb0JBRVRvQixFQUFXakYsaUJBQWlCLFNBQVMsS0FDbkM4RyxFQUFTdEQsTUFBTSxJQWNqQixNQUFNeUQsRUFBd0IsSUFBSWxHLEVBQWNDLEVBQVM4RCxHQUNuRG9DLEVBQW9CLElBQUluRyxFQUFjQyxFQUFTa0UsR0FFckQrQixFQUFzQjlELG1CQUN0QitELEVBQWtCL0Qsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGNsaWNrSGFuZGxlcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NsaWNrSGFuZGxlciA9IGNsaWNrSGFuZGxlcjtcclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUhhbmRsZXIoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWRlbGV0ZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9kZWxldGVIYW5kbGVyKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fY2xpY2tIYW5kbGVyKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2xpa2VIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tbGlrZV9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlSGFuZGxlcigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmV3Q2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAvLyBGaXJzdCBwYXJhbWV0ZXIgc3RvcmVzIHNlbGVjdG9ycyBhbmQgZm9ybSBjbGFzc2VzXHJcbiAgLy8gU2Vjb25kIHRha2VzIHRoZSBmb3JtIGJlaW5nIHZhbGlkYXRlZFxyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gb3B0aW9ucy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIC8vIGxvb2sgZm9yIGlucHV0cyBpbnNpZGUgb2YgZm9ybVxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICAvLyBnZXQgdmFsaWRhdGlvbiBtZXNzYWdlXHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIC8vIGFkZCBlcnJvciBjbGFzcyB0byBpbnB1dFxyXG4gICAgLy8gZGlzcGxheSBlcnJvciBtZXNzYWdlXHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAvLyBsb29rIGZvciBpbnB1dHMgaW5zaWRlIG9mIGZvcm1cclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgLy8gcmVzZXQgZXJyb3IgbWVzc2FnZXNcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICAvLyBDaGVjayB2YWxpZGl0eSBvZiBzcGVjaWZpYyBmb3JtXHJcbiAgICAvLyBsb29wIHRocm91Z2ggYWxsIHRoZSBpbnB1dHMgdG8gc2VlIGlmIGFsbCBhcmUgdmFsaWRcclxuXHJcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIC8vIGlmIGlucHV0IGlzIG5vdCB2YWxpZFxyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBpZiBhbGwgaW5wdXRzIGFyZSB2YWxpZFxyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9jaGFuZ2VCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIENoYW5nZSBzdWJtaXQgYnV0dG9uIHN0YXRlIGFzIG5lZWRlZFxyXG5cclxuICAgIGxldCBmb3VuZEludmFsaWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIGZvdW5kSW52YWxpZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChmb3VuZEludmFsaWQpIHtcclxuICAgICAgLy8gZGlzYWJsZSBidXR0b25cclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gZW5hYmxlIGJ1dHRvblxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIEFkZCBhbGwgbmVlZGVkIGV2ZW50IGhhbmRsZXJzXHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIC8vIEVuYWJsZSB2YWxpZGF0aW9uIG9mIGVhY2ggZm9ybVxyXG4gICAgLy8gKERPIFRISVMgRk9SIEVBQ0ggRk9STSBORUVESU5HIFZBTElEQVRJT04pXHJcblxyXG4gICAgLy8gZW5hYmxpbmcgdmFsaWRhdGlvbiBieSBjYWxsaW5nIGVuYWJsZVZhbGlkYXRpb24oKVxyXG4gICAgLy8gcGFzcyBhbGwgdGhlIHNldHRpbmdzIG9uIGNhbGxcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy9BZGQgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gY2xvc2UgaWNvbiBvZiBwb3B1cFxyXG5cclxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9BZGQgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gY2xvc2UgdG8gYXJlYSBvZiBwYWdlIHNoYWRlZCBncmF5IHRvIGNsb3NlIHBvcHVwXHJcblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIGdldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBpbnB1dExpc3QucmVkdWNlKFxyXG4gICAgICAoYWNjdW11bGF0b3IsIGlucHV0Tm9kZSkgPT4gKHtcclxuICAgICAgICAuLi5hY2N1bXVsYXRvcixcclxuICAgICAgICBbaW5wdXROb2RlLm5hbWVdOiBpbnB1dE5vZGUudmFsdWUsXHJcbiAgICAgIH0pLFxyXG4gICAgICB7fVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUdFTkVSSUMgRUxFTUVOVFMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tUFJPRklMRSBFRElUIE1PREFMIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idG5cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWZvcm1cIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tUFJPRklMRSBBREQgTU9EQUwgRUxFTUVOVFMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBhZGRDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idG5cIik7XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtbW9kYWxcIik7XHJcbmNvbnN0IGNhcmRBZGRGb3JtID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtZm9ybVwiKTtcclxuY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBjYXJkQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBjYXJkVXJsSW5wdXQgPSBjYXJkQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLXVybC1pbnB1dFwiKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1WQUxJREFUSU9OIE9QVElPTlMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBvcHRpb25zID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBjYXJkTGlzdCxcclxuICBwcm9maWxlRWRpdEJ0bixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkQ2FyZEJ0bixcclxuICBjYXJkQWRkRm9ybSxcclxuICBjYXJkVGl0bGVJbnB1dCxcclxuICBjYXJkVXJsSW5wdXQsXHJcbiAgb3B0aW9ucyxcclxufTtcclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIGNhcmRMaXN0LFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybSxcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBhZGRDYXJkQnRuLFxyXG4gIGNhcmRBZGRGb3JtLFxyXG4gIGNhcmRUaXRsZUlucHV0LFxyXG4gIGNhcmRVcmxJbnB1dCxcclxuICBvcHRpb25zLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1QT1BVUFdJVEhJTUFHRSBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNjYXJkLXByZXZpZXctbW9kYWxcIik7XHJcblxyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tQ0FSRCBJTklUSUFMSVpBVElPTi0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgY29uc3QgbmV3Q2FyZCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNhcmRMaXN0XHJcbik7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVVTRVItSU5GTyBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIHByb2ZpbGVKb2I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLSBFRElUIFBST0ZJTEUgUE9QVVAtV0lUSC1GT1JNIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBlZGl0TW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgKHZhbHVlcykgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHZhbHVlcyk7XHJcbiAgZWRpdE1vZGFsLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuZWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBqb2I7XHJcblxyXG4gIGVkaXRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUFERCBDQVJEIFBPUFVQLVdJVEgtRk9STSBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYWRkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWFkZC1tb2RhbFwiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyB0aXRsZSwgdXJsIH0gPSBhZGRNb2RhbC5nZXRJbnB1dFZhbHVlcygpO1xyXG4gIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKHsgbmFtZTogdGl0bGUsIGxpbms6IHVybCB9KTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gIGFkZE1vZGFsLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuYWRkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUZVTkNUSU9OUy0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoZGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCAoKSA9PiB7XHJcbiAgICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldE5ld0NhcmQoKTtcclxufVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVZBTElEQVRJT04gSU5TVEFOVElBVE9SUy0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0VmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZENhcmRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgY2FyZEFkZEZvcm0pO1xyXG5cclxucHJvZmlsZUVkaXRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkQ2FyZFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNjYXJkLXByZXZpZXctaW1hZ2VcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3ByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNjYXJkLXByZXZpZXctdGl0bGVcIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9wZW4gPSAoeyBuYW1lLCBsaW5rIH0pID0+IHtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IGAke25hbWV9YDtcclxuICAgIHRoaXMuX3ByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IGAke25hbWV9YDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGl0ZW1zLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gaXRlbXMubGluaztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICByZXR1cm4gaXRlbTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZSwgcHJvZmlsZUpvYiB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWUpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdXNlckluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBkYXRhLmpvYjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJjbGlja0hhbmRsZXIiLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9jbGlja0hhbmRsZXIiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlSGFuZGxlciIsIl9kZWxldGVIYW5kbGVyIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJnZXROZXdDYXJkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJhbHQiLCJzcmMiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJvcHRpb25zIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrVmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2Rpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfY2hhbmdlQnV0dG9uU3RhdGUiLCJmb3VuZEludmFsaWQiLCJfaW5wdXRFbGVtZW50cyIsImZvckVhY2giLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZXZlbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsImlucHV0Tm9kZSIsInZhbHVlIiwicmVzZXQiLCJpbml0aWFsQ2FyZHMiLCJjYXJkTGlzdCIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImFkZENhcmRCdG4iLCJjYXJkQWRkRm9ybSIsImltYWdlUG9wdXAiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdUaXRsZSIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImNhcmREYXRhIiwibmV3Q2FyZCIsInJlbmRlckNhcmQiLCJ1c2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsImRhdGEiLCJlZGl0TW9kYWwiLCJ2YWx1ZXMiLCJhZGRNb2RhbCIsInRpdGxlIiwidXJsIiwicHJvZmlsZUVkaXRWYWxpZGF0aW9uIiwiYWRkQ2FyZFZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9