!function(){"use strict";class e{constructor(e,t,r,s,n,i){let{name:o,link:a,_id:l,isLiked:c}=e;this._name=o,this._link=a,this._id=l,this._isLiked=c,this._cardSelector=t,this._clickHandler=r,this._deletePopup=s,this._handleDelete=n,this._handleLike=i}getId(){return this._id}_setEventListeners(){this._cardElement.querySelector(".card__button-like").addEventListener("click",(()=>{this._handleLike()})),this._cardElement.querySelector(".card__button-delete").addEventListener("click",(()=>{this._handleDelete()})),this._cardImageElement.addEventListener("click",(()=>{this._clickHandler({name:this._name,link:this._link})}))}likeHandler(){this._cardElement.querySelector(".card__button-like").classList.toggle("card__button-like_active")}deleteHandler(){this._cardElement.remove(),this._cardElement=null}getNewCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._cardImageElement.alt=this._name,this._cardImageElement.src=this._link,this._cardTitleElement.textContent=this._name,this._isLiked&&this._cardElement.querySelector(".card__button-like").classList.add("card__button-like_active"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.add(this._errorClass)}_hideInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.remove(this._errorClass)}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_changeButtonState(){let e=!1;this._inputElements.forEach((t=>{t.validity.valid||(e=!0)})),e?this._disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkValidity(e),this._changeButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._disableButton()})),this._setEventListeners()}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&(e.preventDefault(),this.close())};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class s extends r{constructor(e,t,r){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitType=r}getInputValues(){return Array.from(this._popupForm.querySelectorAll(".modal__input")).reduce(((e,t)=>({...e,[t.name]:t.value})),{})}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this.getInputValues())})),super.setEventListeners()}loadingButtonState(){this._confirmBtn=this._popupElement.querySelector(".modal__button"),this._confirmBtn.textContent="Saving..."}resetButtonState(){this._confirmBtn.textContent=`${this._submitType}`}}const n=document.querySelector(".cards__list"),i=(document.querySelector("#profile-name"),document.querySelector("#profile-about"),document.querySelector("#profile-avatar")),o=document.querySelector("#profile-picture-edit-btn"),a=document.querySelector("#profile-picture-form"),l=document.querySelector("#profile-picture-input"),c=document.querySelector("#profile-edit-btn"),d=document.querySelector("#profile-edit-form"),u=document.querySelector("#profile-title-input"),h=document.querySelector("#profile-description-input"),m=document.querySelector("#profile-add-btn"),_=document.querySelector("#profile-add-modal").querySelector("#card-add-form"),p=(_.querySelector("#profile-add-title-input"),_.querySelector("#profile-add-url-input"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error",errorClass:"modal__error_visible"}),E={baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"97f6b443-08dd-4f1c-9189-025b318b185d","Content-Type":"application/json"}},f=new class{constructor(){this._baseUrl=E.baseUrl,this._baseHeaders=E.headers,this._userPath=`${this._baseUrl}/users/me`,this._cardPath=`${this._baseUrl}/cards`}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}logError(e){console.error(e)}returnPromises(e){let[t,r]=e;return Promise.all([t,r])}getInitialCards(){return fetch(this._cardPath,{method:"GET",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}addNewCard(e){let{name:t,link:r}=e;return fetch(this._cardPath,{method:"POST",headers:this._baseHeaders,body:JSON.stringify({name:t,link:r})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch(`${this._cardPath}/${e}`,{method:"DELETE",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}addCardLike(e){return fetch(`${this._cardPath}/${e}/likes`,{method:"PUT",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}removeCardLike(e){return fetch(`${this._cardPath}/${e}/likes`,{method:"DELETE",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch(this._userPath,{method:"GET",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}setUserInfo(e){let{name:t,about:r}=e;return fetch(this._userPath,{method:"PATCH",headers:this._baseHeaders,body:JSON.stringify({name:t,about:r})}).then((e=>this._checkResponse(e)))}setProfilePicture(e){return fetch(`${this._userPath}/avatar`,{method:"PATCH",headers:this._baseHeaders,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponse(e)))}}(E),S=new class extends r{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#card-preview-image"),this._previewTitle=this._popupElement.querySelector("#card-preview-title")}open=e=>{let{name:t,link:r}=e;this._previewImage.src=r,this._previewImage.alt=`${t}`,this._previewTitle.textContent=`${t}`,super.open()}}("#card-preview-modal");S.setEventListeners();const v=new class{constructor(e,t){let{items:r,renderer:s}=e;this._name=r.name,this._link=r.link,this._renderer=s,this._container=t}renderItems(e){e.forEach((e=>(this._renderer(e),e)))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=w(e);v.addItem(t)}},n);f.getInitialCards().then((e=>{v.renderItems(e)})).catch((e=>{f.logError(e)}));const b=new class{constructor(e,t,r){this._profileName=document.querySelector(e),this._profileJob=document.querySelector(t),this._profileAvatar=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}setUserAvatar(e){this._profileAvatar.src=e}}("#profile-name","#profile-about","#profile-avatar");f.getUserInfo().then((e=>{b.setUserInfo(e.name,e.about),b.setUserAvatar(e.avatar)})).catch((e=>{f.logError(e)}));const k=new s("#profile-edit-modal",(e=>{k.loadingButtonState(),f.setUserInfo({name:e.name,about:e.job}).then((e=>{b.setUserInfo(e.name,e.about),k.resetButtonState()})).catch((e=>{f.logError(e)})),k.close()}),"Save");k.setEventListeners(),c.addEventListener("click",(()=>{const{name:e,job:t}=b.getUserInfo();u.value=e,h.value=t,k.open()}));const g=new s("#profile-picture-edit-modal",(()=>{g.loadingButtonState(),f.setProfilePicture(l.value).then((e=>{i.src=e.avatar,g.resetButtonState()})).catch((e=>{f.logError(e)})),g.close()}),"Save");g.setEventListeners(),o.addEventListener("click",(()=>{g.open()}));const y=new s("#profile-add-modal",(()=>{y.loadingButtonState();const{title:e,url:t}=y.getInputValues();f.addNewCard({name:e,link:t}).then((e=>{const t=w({name:e.name,link:e.link,_id:e._id,isLiked:e.isLiked});v.addItem(t),y.resetButtonState()})).catch((e=>{f.logError(e)})),y.close()}),"Create");y.setEventListeners(),m.addEventListener("click",(()=>{y.open()}));const L=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#confirm-delete-form")}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()})),super.setEventListeners()}loadingButtonState(){this._confirmBtn=this._popupElement.querySelector("#delete-card-btn"),this._confirmBtn.textContent="Deleting..."}resetButtonState(){this._confirmBtn.textContent="Yes"}}("#card-delete-modal");function w(t){const r=new e(t,"#card-template",(()=>{S.open(t)}),L,(()=>{const e=r.getId();L.open(),L.setSubmitAction((()=>{L.loadingButtonState(),f.deleteCard(e).then((()=>{r.deleteHandler(),L.close(),L.resetButtonState()})).catch((e=>{f.logError(e)}))}))}),(()=>{const e=r.getId();t.isLiked?f.removeCardLike(e).then((()=>{r.likeHandler()})).catch((e=>{f.logError(e)})):f.addCardLike(e).then((()=>{r.likeHandler()})).catch((e=>{f.logError(e)}))}));return r.getNewCard()}L.setEventListeners();const C=new t(p,d),q=new t(p,_),B=new t(p,a);C.enableValidation(),q.enableValidation(),B.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ2ZvRixNQUFLLEtBQ0ptRCxFQUFZdkssYUFBYSxJQUUxQm9KLE9BQU8xQyxJQUNOYixFQUFJWSxTQUFTQyxFQUFJLElBZnJCYixFQUNHK0IsWUFBWTVGLEdBQ1pvRixNQUFLLEtBQ0ptRCxFQUFZdkssYUFBYSxJQUUxQm9KLE9BQU8xQyxJQUNOYixFQUFJWSxTQUFTQyxFQUFJLEdBV3ZCLElBR0osT0FBTzZELEVBQVlsSyxZQUNyQixDQXpEQWdLLEVBQVkxRyxvQkE2RFosTUFBTTZHLEVBQXdCLElBQUkxSixFQUFjQyxFQUFTcUUsR0FDbkRxRixFQUFvQixJQUFJM0osRUFBY0MsRUFBU3lFLEdBQy9Da0YsRUFBMkIsSUFBSTVKLEVBQ25DQyxFQUNBa0UsR0FHRnVGLEVBQXNCdkgsbUJBQ3RCd0gsRUFBa0J4SCxtQkFDbEJ5SCxFQUF5QnpILGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgY2xpY2tIYW5kbGVyLFxyXG4gICAgZGVsZXRlUG9wdXAsXHJcbiAgICBoYW5kbGVEZWxldGUsXHJcbiAgICBoYW5kbGVMaWtlXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faWQgPSBfaWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NsaWNrSGFuZGxlciA9IGNsaWNrSGFuZGxlcjtcclxuICAgIHRoaXMuX2RlbGV0ZVBvcHVwID0gZGVsZXRlUG9wdXA7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlID0gaGFuZGxlTGlrZTtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsZXRlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NsaWNrSGFuZGxlcih7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tbGlrZV9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXROZXdDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAvLyBGaXJzdCBwYXJhbWV0ZXIgc3RvcmVzIHNlbGVjdG9ycyBhbmQgZm9ybSBjbGFzc2VzXHJcbiAgLy8gU2Vjb25kIHRha2VzIHRoZSBmb3JtIGJlaW5nIHZhbGlkYXRlZFxyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gb3B0aW9ucy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIC8vIGxvb2sgZm9yIGlucHV0cyBpbnNpZGUgb2YgZm9ybVxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICAvLyBnZXQgdmFsaWRhdGlvbiBtZXNzYWdlXHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIC8vIGFkZCBlcnJvciBjbGFzcyB0byBpbnB1dFxyXG4gICAgLy8gZGlzcGxheSBlcnJvciBtZXNzYWdlXHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAvLyBsb29rIGZvciBpbnB1dHMgaW5zaWRlIG9mIGZvcm1cclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgLy8gcmVzZXQgZXJyb3IgbWVzc2FnZXNcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICAvLyBDaGVjayB2YWxpZGl0eSBvZiBzcGVjaWZpYyBmb3JtXHJcbiAgICAvLyBsb29wIHRocm91Z2ggYWxsIHRoZSBpbnB1dHMgdG8gc2VlIGlmIGFsbCBhcmUgdmFsaWRcclxuXHJcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIC8vIGlmIGlucHV0IGlzIG5vdCB2YWxpZFxyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBpZiBhbGwgaW5wdXRzIGFyZSB2YWxpZFxyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9jaGFuZ2VCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIENoYW5nZSBzdWJtaXQgYnV0dG9uIHN0YXRlIGFzIG5lZWRlZFxyXG5cclxuICAgIGxldCBmb3VuZEludmFsaWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIGZvdW5kSW52YWxpZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChmb3VuZEludmFsaWQpIHtcclxuICAgICAgLy8gZGlzYWJsZSBidXR0b25cclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gZW5hYmxlIGJ1dHRvblxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIEFkZCBhbGwgbmVlZGVkIGV2ZW50IGhhbmRsZXJzXHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIC8vIEVuYWJsZSB2YWxpZGF0aW9uIG9mIGVhY2ggZm9ybVxyXG4gICAgLy8gKERPIFRISVMgRk9SIEVBQ0ggRk9STSBORUVESU5HIFZBTElEQVRJT04pXHJcblxyXG4gICAgLy8gZW5hYmxpbmcgdmFsaWRhdGlvbiBieSBjYWxsaW5nIGVuYWJsZVZhbGlkYXRpb24oKVxyXG4gICAgLy8gcGFzcyBhbGwgdGhlIHNldHRpbmdzIG9uIGNhbGxcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy9BZGQgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gY2xvc2UgaWNvbiBvZiBwb3B1cFxyXG5cclxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9BZGQgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gY2xvc2UgdG8gYXJlYSBvZiBwYWdlIHNoYWRlZCBncmF5IHRvIGNsb3NlIHBvcHVwXHJcblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgc3VibWl0VHlwZSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3N1Ym1pdFR5cGUgPSBzdWJtaXRUeXBlO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIilcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5yZWR1Y2UoXHJcbiAgICAgIChhY2N1bXVsYXRvciwgaW5wdXROb2RlKSA9PiAoe1xyXG4gICAgICAgIC4uLmFjY3VtdWxhdG9yLFxyXG4gICAgICAgIFtpbnB1dE5vZGUubmFtZV06IGlucHV0Tm9kZS52YWx1ZSxcclxuICAgICAgfSksXHJcbiAgICAgIHt9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBsb2FkaW5nQnV0dG9uU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9jb25maXJtQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9jb25maXJtQnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICB9XHJcblxyXG4gIHJlc2V0QnV0dG9uU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9jb25maXJtQnRuLnRleHRDb250ZW50ID0gYCR7dGhpcy5fc3VibWl0VHlwZX1gO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUdFTkVSSUMgRUxFTUVOVFMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tUFJPRklMRSBFRElUIE1PREFMIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFib3V0XCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhclwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLXBpY3R1cmUtZWRpdC1idG5cIlxyXG4pO1xyXG5jb25zdCBwcm9maWxlUGljdHVyZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXBpY3R1cmUtZm9ybVwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVGb3JtSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtcGljdHVyZS1pbnB1dFwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVBST0ZJTEUgQUREIE1PREFMIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYWRkQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnRuXCIpO1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIpO1xyXG5jb25zdCBjYXJkQWRkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLWZvcm1cIik7XHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gY2FyZEFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgY2FyZFVybElucHV0ID0gY2FyZEFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC11cmwtaW5wdXRcIik7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tVkFMSURBVElPTiBPUFRJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUFQSSBPUFRJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYXBpT3B0aW9ucyA9IHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI5N2Y2YjQ0My0wOGRkLTRmMWMtOTE4OS0wMjViMzE4YjE4NWRcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBjYXJkTGlzdCxcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQWJvdXQsXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBwcm9maWxlUGljdHVyZUVkaXRCdG4sXHJcbiAgcHJvZmlsZVBpY3R1cmVFZGl0Rm9ybSxcclxuICBwcm9maWxlUGljdHVyZUZvcm1JbnB1dCxcclxuICBwcm9maWxlRWRpdEJ0bixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkQ2FyZEJ0bixcclxuICBjYXJkQWRkRm9ybSxcclxuICBjYXJkVGl0bGVJbnB1dCxcclxuICBjYXJkVXJsSW5wdXQsXHJcbiAgb3B0aW9ucyxcclxuICBhcGlPcHRpb25zLFxyXG59O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgY2FyZExpc3QsXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZUFib3V0LFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbiAgcHJvZmlsZVBpY3R1cmVFZGl0QnRuLFxyXG4gIHByb2ZpbGVQaWN0dXJlRWRpdEZvcm0sXHJcbiAgcHJvZmlsZVBpY3R1cmVGb3JtSW5wdXQsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGFkZENhcmRCdG4sXHJcbiAgY2FyZEFkZEZvcm0sXHJcbiAgY2FyZFRpdGxlSW5wdXQsXHJcbiAgY2FyZFVybElucHV0LFxyXG4gIG9wdGlvbnMsXHJcbiAgYXBpT3B0aW9ucyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tQVBJIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaU9wdGlvbnMpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVBPUFVQV0lUSElNQUdFIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmQtcHJldmlldy1tb2RhbFwiKTtcclxuXHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1DQVJEU0VDVElPTiBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY2FyZExpc3RcclxuKTtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZERhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGFwaS5sb2dFcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVVTRVItSU5GTyBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgXCIjcHJvZmlsZS1uYW1lXCIsXHJcbiAgXCIjcHJvZmlsZS1hYm91dFwiLFxyXG4gIFwiI3Byb2ZpbGUtYXZhdGFyXCJcclxuKTtcclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgYXBpLmxvZ0Vycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tIEVESVQgUFJPRklMRSBQT1BVUC1XSVRILUZPUk0gSU5TVEFOVElBVElPTi0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gICh2YWx1ZXMpID0+IHtcclxuICAgIGVkaXRNb2RhbC5sb2FkaW5nQnV0dG9uU3RhdGUoKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0VXNlckluZm8oeyBuYW1lOiB2YWx1ZXMubmFtZSwgYWJvdXQ6IHZhbHVlcy5qb2IgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xyXG4gICAgICAgIGVkaXRNb2RhbC5yZXNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgYXBpLmxvZ0Vycm9yKGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgZWRpdE1vZGFsLmNsb3NlKCk7XHJcbiAgfSxcclxuICBcIlNhdmVcIlxyXG4pO1xyXG5cclxuZWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBqb2I7XHJcblxyXG4gIGVkaXRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVBST0ZJTEUgUElDVFVSRSBQT1BVUC1XSVRILUZPUk0gSU5TVEFOVElBVElPTi0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLXBpY3R1cmUtZWRpdC1tb2RhbFwiLFxyXG4gICgpID0+IHtcclxuICAgIHByb2ZpbGVQaWN0dXJlTW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcbiAgICBhcGlcclxuICAgICAgLnNldFByb2ZpbGVQaWN0dXJlKHByb2ZpbGVQaWN0dXJlRm9ybUlucHV0LnZhbHVlKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcHJvZmlsZUF2YXRhci5zcmMgPSByZXMuYXZhdGFyO1xyXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlTW9kYWwucmVzZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGFwaS5sb2dFcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICAgIHByb2ZpbGVQaWN0dXJlTW9kYWwuY2xvc2UoKTtcclxuICB9LFxyXG4gIFwiU2F2ZVwiXHJcbik7XHJcblxyXG5wcm9maWxlUGljdHVyZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlUGljdHVyZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlUGljdHVyZU1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tQUREIENBUkQgUE9QVVAtV0lUSC1GT1JNIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBhZGRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXHJcbiAgKCkgPT4ge1xyXG4gICAgYWRkTW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcbiAgICBjb25zdCB7IHRpdGxlLCB1cmwgfSA9IGFkZE1vZGFsLmdldElucHV0VmFsdWVzKCk7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZE5ld0NhcmQoeyBuYW1lOiB0aXRsZSwgbGluazogdXJsIH0pXHJcbiAgICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKHtcclxuICAgICAgICAgIG5hbWU6IGNhcmREYXRhLm5hbWUsXHJcbiAgICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxyXG4gICAgICAgICAgX2lkOiBjYXJkRGF0YS5faWQsXHJcbiAgICAgICAgICBpc0xpa2VkOiBjYXJkRGF0YS5pc0xpa2VkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgICAgICAgYWRkTW9kYWwucmVzZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGFwaS5sb2dFcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICAgIGFkZE1vZGFsLmNsb3NlKCk7XHJcbiAgfSxcclxuICBcIkNyZWF0ZVwiXHJcbik7XHJcblxyXG5hZGRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYWRkQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tREVMRVRFIENBUkQgUE9QVVAgSU5TVEFOVElBVElPTi0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IGRlbGV0ZU1vZGFsID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNjYXJkLWRlbGV0ZS1tb2RhbFwiKTtcclxuXHJcbmRlbGV0ZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tRlVOQ1RJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGRhdGEsXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGltYWdlUG9wdXAub3BlbihkYXRhKTtcclxuICAgIH0sXHJcbiAgICBkZWxldGVNb2RhbCxcclxuICAgICgpID0+IHtcclxuICAgICAgY29uc3QgaWQgPSBjYXJkRWxlbWVudC5nZXRJZCgpO1xyXG5cclxuICAgICAgZGVsZXRlTW9kYWwub3BlbigpO1xyXG5cclxuICAgICAgZGVsZXRlTW9kYWwuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICBkZWxldGVNb2RhbC5sb2FkaW5nQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuZGVsZXRlQ2FyZChpZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnQuZGVsZXRlSGFuZGxlcigpO1xyXG4gICAgICAgICAgICBkZWxldGVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBkZWxldGVNb2RhbC5yZXNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgYXBpLmxvZ0Vycm9yKGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpZCA9IGNhcmRFbGVtZW50LmdldElkKCk7XHJcblxyXG4gICAgICBpZiAoIWRhdGEuaXNMaWtlZCkge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmFkZENhcmRMaWtlKGlkKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkRWxlbWVudC5saWtlSGFuZGxlcigpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGFwaS5sb2dFcnJvcihlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAucmVtb3ZlQ2FyZExpa2UoaWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50Lmxpa2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgYXBpLmxvZ0Vycm9yKGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldE5ld0NhcmQoKTtcclxufVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVZBTElEQVRJT04gSU5TVEFOVElBVE9SUy0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0VmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZENhcmRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgY2FyZEFkZEZvcm0pO1xyXG5jb25zdCBwcm9maWxlUGljdHVyZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBvcHRpb25zLFxyXG4gIHByb2ZpbGVQaWN0dXJlRWRpdEZvcm1cclxuKTtcclxuXHJcbnByb2ZpbGVFZGl0VmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZENhcmRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucHJvZmlsZVBpY3R1cmVWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiaW1wb3J0IHsgYXBpT3B0aW9ucyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBhcGlPcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9iYXNlSGVhZGVycyA9IGFwaU9wdGlvbnMuaGVhZGVycztcclxuICAgIHRoaXMuX3VzZXJQYXRoID0gYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgO1xyXG4gICAgdGhpcy5fY2FyZFBhdGggPSBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2A7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBsb2dFcnJvcihlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9XHJcblxyXG4gIHJldHVyblByb21pc2VzKFtwcm9taXNlMSwgcHJvbWlzZTJdKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3Byb21pc2UxLCBwcm9taXNlMl0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2NhcmRQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2NhcmRQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2NhcmRQYXRofS8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fY2FyZFBhdGh9LyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9jYXJkUGF0aH0vJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VzZXJQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXNlclBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFByb2ZpbGVQaWN0dXJlKGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91c2VyUGF0aH0vYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjY2FyZC1wcmV2aWV3LWltYWdlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9wcmV2aWV3VGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjY2FyZC1wcmV2aWV3LXRpdGxlXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuID0gKHsgbmFtZSwgbGluayB9KSA9PiB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBgJHtuYW1lfWA7XHJcbiAgICB0aGlzLl9wcmV2aWV3VGl0bGUudGV4dENvbnRlbnQgPSBgJHtuYW1lfWA7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcclxuICAgIHRoaXMuX25hbWUgPSBpdGVtcy5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGl0ZW1zLmxpbms7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gIH1cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9KTtcclxuICB9XHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHByb2ZpbGVOYW1lLCBwcm9maWxlSm9iLCBwcm9maWxlQXZhdGFyKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWUpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYik7XHJcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm8gPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB1c2VySW5mbztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gZGF0YTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGxvYWRpbmdCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX2NvbmZpcm1CdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtY2FyZC1idG5cIik7XHJcblxyXG4gICAgdGhpcy5fY29uZmlybUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuICB9XHJcblxyXG4gIHJlc2V0QnV0dG9uU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9jb25maXJtQnRuLnRleHRDb250ZW50ID0gXCJZZXNcIjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJjbGlja0hhbmRsZXIiLCJkZWxldGVQb3B1cCIsImhhbmRsZURlbGV0ZSIsImhhbmRsZUxpa2UiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9jbGlja0hhbmRsZXIiLCJfZGVsZXRlUG9wdXAiLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZUxpa2UiLCJnZXRJZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJsaWtlSGFuZGxlciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImRlbGV0ZUhhbmRsZXIiLCJyZW1vdmUiLCJnZXROZXdDYXJkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJhbHQiLCJzcmMiLCJ0ZXh0Q29udGVudCIsImFkZCIsIkZvcm1WYWxpZGF0b3IiLCJvcHRpb25zIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrVmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2Rpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfY2hhbmdlQnV0dG9uU3RhdGUiLCJmb3VuZEludmFsaWQiLCJfaW5wdXRFbGVtZW50cyIsImZvckVhY2giLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZXZlbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1Ym1pdFR5cGUiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRUeXBlIiwiZ2V0SW5wdXRWYWx1ZXMiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsImlucHV0Tm9kZSIsInZhbHVlIiwicmVzZXQiLCJsb2FkaW5nQnV0dG9uU3RhdGUiLCJfY29uZmlybUJ0biIsInJlc2V0QnV0dG9uU3RhdGUiLCJjYXJkTGlzdCIsInByb2ZpbGVBdmF0YXIiLCJwcm9maWxlUGljdHVyZUVkaXRCdG4iLCJwcm9maWxlUGljdHVyZUVkaXRGb3JtIiwicHJvZmlsZVBpY3R1cmVGb3JtSW5wdXQiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJhZGRDYXJkQnRuIiwiY2FyZEFkZEZvcm0iLCJhcGlPcHRpb25zIiwiYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiYXBpIiwiX2Jhc2VVcmwiLCJfYmFzZUhlYWRlcnMiLCJfdXNlclBhdGgiLCJfY2FyZFBhdGgiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJsb2dFcnJvciIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInJldHVyblByb21pc2VzIiwicHJvbWlzZTEiLCJwcm9taXNlMiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImFkZE5ld0NhcmQiLCJfcmVmMiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZENhcmRMaWtlIiwicmVtb3ZlQ2FyZExpa2UiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiX3JlZjMiLCJhYm91dCIsInNldFByb2ZpbGVQaWN0dXJlIiwiYXZhdGFyIiwiaW1hZ2VQb3B1cCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld1RpdGxlIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZERhdGEiLCJuZXdDYXJkIiwicmVuZGVyQ2FyZCIsImNhdGNoIiwidXNlckluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsIl9wcm9maWxlQXZhdGFyIiwiam9iIiwic2V0VXNlckF2YXRhciIsImRhdGEiLCJ1c2VyRGF0YSIsImVkaXRNb2RhbCIsInZhbHVlcyIsInByb2ZpbGVQaWN0dXJlTW9kYWwiLCJhZGRNb2RhbCIsInRpdGxlIiwidXJsIiwiZGVsZXRlTW9kYWwiLCJzZXRTdWJtaXRBY3Rpb24iLCJjYXJkRWxlbWVudCIsInByb2ZpbGVFZGl0VmFsaWRhdGlvbiIsImFkZENhcmRWYWxpZGF0aW9uIiwicHJvZmlsZVBpY3R1cmVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==