!function(){"use strict";class e{constructor(e,t,r,s,n,i){let{name:o,link:a,_id:l,isLiked:c}=e;this._name=o,this._link=a,this._id=l,this._isLiked=c,this._cardSelector=t,this._clickHandler=r,this._deletePopup=s,this._handleDelete=n,this._handleLike=i}getId(){return this._id}_setEventListeners(){this._cardElement.querySelector(".card__button-like").addEventListener("click",(()=>{this._handleLike()})),this._cardElement.querySelector(".card__button-delete").addEventListener("click",(()=>{this._handleDelete()})),this._cardImageElement.addEventListener("click",(()=>{this._clickHandler({name:this._name,link:this._link})}))}likeHandler(){this._cardElement.querySelector(".card__button-like").classList.toggle("card__button-like_active")}deleteHandler(){this._cardElement.remove(),this._cardElement=null}getNewCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._cardImageElement.alt=this._name,this._cardImageElement.src=this._link,this._cardTitleElement.textContent=this._name,this._isLiked&&this._cardElement.querySelector(".card__button-like").classList.add("card__button-like_active"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.add(this._errorClass)}_hideInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.remove(this._errorClass)}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_changeButtonState(){let e=!1;this._inputElements.forEach((t=>{t.validity.valid||(e=!0)})),e?this.disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkValidity(e),this._changeButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&(e.preventDefault(),this.close())};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class s extends r{constructor(e,t,r){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitType=r,this._submitBtn=this._popupElement.querySelector(".modal__button")}_getInputValues(){return Array.from(this._popupForm.querySelectorAll(".modal__input")).reduce(((e,t)=>({...e,[t.name]:t.value})),{})}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}loadingButtonState(){this._submitBtn.textContent="Saving..."}resetButtonState(){this._submitBtn.textContent=`${this._submitType}`}}const n=document.querySelector(".cards__list"),i=(document.querySelector("#profile-name"),document.querySelector("#profile-about"),document.querySelector("#profile-avatar"),document.querySelector("#profile-picture-edit-btn")),o=document.querySelector("#profile-picture-form"),a=(document.querySelector("#profile-picture-submit-btn"),document.querySelector("#profile-picture-input"),document.querySelector("#profile-edit-btn")),l=document.querySelector("#profile-edit-form"),c=document.querySelector("#profile-title-input"),d=document.querySelector("#profile-description-input"),u=document.querySelector("#profile-add-btn"),h=document.querySelector("#profile-add-modal"),_=(document.querySelector("#add-card-btn"),h.querySelector("#card-add-form")),m=(_.querySelector("#profile-add-title-input"),_.querySelector("#profile-add-url-input"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error",errorClass:"modal__error_visible"}),p={baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"97f6b443-08dd-4f1c-9189-025b318b185d","Content-Type":"application/json"}},E=new class{constructor(){this._baseUrl=p.baseUrl,this._baseHeaders=p.headers,this._userPath=`${this._baseUrl}/users/me`,this._cardPath=`${this._baseUrl}/cards`}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}logError(e){console.error(e)}returnPromises(e){let[t,r]=e;return Promise.all([t,r])}getInitialCards(){return fetch(this._cardPath,{method:"GET",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}addNewCard(e){let{name:t,link:r}=e;return fetch(this._cardPath,{method:"POST",headers:this._baseHeaders,body:JSON.stringify({name:t,link:r})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch(`${this._cardPath}/${e}`,{method:"DELETE",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}addCardLike(e){return fetch(`${this._cardPath}/${e}/likes`,{method:"PUT",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}removeCardLike(e){return fetch(`${this._cardPath}/${e}/likes`,{method:"DELETE",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch(this._userPath,{method:"GET",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}setUserInfo(e){let{name:t,about:r}=e;return fetch(this._userPath,{method:"PATCH",headers:this._baseHeaders,body:JSON.stringify({name:t,about:r})}).then((e=>this._checkResponse(e)))}setProfilePicture(e){return fetch(`${this._userPath}/avatar`,{method:"PATCH",headers:this._baseHeaders,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponse(e)))}}(p),f=new t(m,l),S=new t(m,_),b=new t(m,o);f.enableValidation(),S.enableValidation(),b.enableValidation();const v=new class extends r{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#card-preview-image"),this._previewTitle=this._popupElement.querySelector("#card-preview-title")}open=e=>{let{name:t,link:r}=e;this._previewImage.src=r,this._previewImage.alt=`${t}`,this._previewTitle.textContent=`${t}`,super.open()}}("#card-preview-modal");v.setEventListeners();const y=new class{constructor(e,t){let{renderer:r}=e;this._renderer=r,this._container=t}renderItems(e){e.forEach((e=>(this._renderer(e),e)))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=B(e);y.addItem(t)}},n);E.getInitialCards().then((e=>{y.renderItems(e)})).catch((e=>{console.error(e)}));const k=new class{constructor(e,t,r){this._profileName=document.querySelector(e),this._profileJob=document.querySelector(t),this._profileAvatar=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}setUserAvatar(e){this._profileAvatar.src=e}}("#profile-name","#profile-about","#profile-avatar");E.getUserInfo().then((e=>{k.setUserInfo(e.name,e.about),k.setUserAvatar(e.avatar)})).catch((e=>{console.error(e)}));const L=new s("#profile-edit-modal",(e=>{L.loadingButtonState(),E.setUserInfo({name:e.name,about:e.job}).then((e=>{k.setUserInfo(e.name,e.about),L.close()})).catch((e=>{console.error(e)})).finally((()=>{L.resetButtonState()}))}),"Save");L.setEventListeners(),a.addEventListener("click",(()=>{const{name:e,job:t}=k.getUserInfo();c.value=e,d.value=t,L.open()}));const C=new s("#profile-picture-edit-modal",(e=>{C.loadingButtonState(),E.setProfilePicture(e.url).then((e=>{k.setUserAvatar(e.avatar),C.close(),b.disableButton()})).catch((e=>{console.error(e)})).finally((()=>{C.resetButtonState()}))}),"Save");C.setEventListeners(),i.addEventListener("click",(()=>{C.open()}));const q=new s("#profile-add-modal",(e=>{let{title:t,url:r}=e;q.loadingButtonState(),E.addNewCard({name:t,link:r}).then((e=>{const t=B(e);y.addItem(t),q.close(),S.disableButton()})).catch((e=>{console.error(e)})).finally((()=>{q.resetButtonState()}))}),"Create");q.setEventListeners(),u.addEventListener("click",(()=>{q.open()}));const g=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#confirm-delete-form"),this._confirmBtn=this._popupElement.querySelector("#delete-card-btn")}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()})),super.setEventListeners()}loadingButtonState(){this._confirmBtn.textContent="Deleting..."}resetButtonState(){this._confirmBtn.textContent="Yes"}}("#card-delete-modal");function B(t){const r=new e(t,"#card-template",(()=>{v.open(t)}),g,(()=>{const e=r.getId();g.open(),g.setSubmitAction((()=>{g.loadingButtonState(),E.deleteCard(e).then((()=>{r.deleteHandler(),g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.resetButtonState()}))}))}),(()=>{const e=r.getId();t.isLiked?E.removeCardLike(e).then((()=>{r.likeHandler()})).catch((e=>{console.error(e)})):E.addCardLike(e).then((()=>{r.likeHandler()})).catch((e=>{console.error(e)}))}));return r.getNewCard()}g.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixFQUFJLElBZnRCYixFQUNHK0IsWUFBWTNGLEdBQ1ptRixNQUFLLEtBQ0p5RCxFQUFZNUssYUFBYSxJQUUxQnNKLE9BQU83QyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLEdBV3hCLElBR0osT0FBT21FLEVBQVl2SyxZQUNyQixDQTNEQW9LLEVBQVk5RyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGNsaWNrSGFuZGxlcixcclxuICAgIGRlbGV0ZVBvcHVwLFxyXG4gICAgaGFuZGxlRGVsZXRlLFxyXG4gICAgaGFuZGxlTGlrZVxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2lkID0gX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9jbGlja0hhbmRsZXIgPSBjbGlja0hhbmRsZXI7XHJcbiAgICB0aGlzLl9kZWxldGVQb3B1cCA9IGRlbGV0ZVBvcHVwO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XHJcbiAgfVxyXG5cclxuICBnZXRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2UoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWRlbGV0ZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9jbGlja0hhbmRsZXIoeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsaWtlSGFuZGxlcigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlSGFuZGxlcigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmV3Q2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgLy8gRmlyc3QgcGFyYW1ldGVyIHN0b3JlcyBzZWxlY3RvcnMgYW5kIGZvcm0gY2xhc3Nlc1xyXG4gIC8vIFNlY29uZCB0YWtlcyB0aGUgZm9ybSBiZWluZyB2YWxpZGF0ZWRcclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IG9wdGlvbnMuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb25zLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAvLyBsb29rIGZvciBpbnB1dHMgaW5zaWRlIG9mIGZvcm1cclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgLy8gZ2V0IHZhbGlkYXRpb24gbWVzc2FnZVxyXG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAvLyBhZGQgZXJyb3IgY2xhc3MgdG8gaW5wdXRcclxuICAgIC8vIGRpc3BsYXkgZXJyb3IgbWVzc2FnZVxyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgLy8gbG9vayBmb3IgaW5wdXRzIGluc2lkZSBvZiBmb3JtXHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIC8vIHJlc2V0IGVycm9yIG1lc3NhZ2VzXHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgLy8gQ2hlY2sgdmFsaWRpdHkgb2Ygc3BlY2lmaWMgZm9ybVxyXG4gICAgLy8gbG9vcCB0aHJvdWdoIGFsbCB0aGUgaW5wdXRzIHRvIHNlZSBpZiBhbGwgYXJlIHZhbGlkXHJcblxyXG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAvLyBpZiBpbnB1dCBpcyBub3QgdmFsaWRcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gaWYgYWxsIGlucHV0cyBhcmUgdmFsaWRcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9jaGFuZ2VCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIENoYW5nZSBzdWJtaXQgYnV0dG9uIHN0YXRlIGFzIG5lZWRlZFxyXG5cclxuICAgIGxldCBmb3VuZEludmFsaWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIGZvdW5kSW52YWxpZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChmb3VuZEludmFsaWQpIHtcclxuICAgICAgLy8gZGlzYWJsZSBidXR0b25cclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBlbmFibGUgYnV0dG9uXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gQWRkIGFsbCBuZWVkZWQgZXZlbnQgaGFuZGxlcnNcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgLy8gRW5hYmxlIHZhbGlkYXRpb24gb2YgZWFjaCBmb3JtXHJcbiAgICAvLyAoRE8gVEhJUyBGT1IgRUFDSCBGT1JNIE5FRURJTkcgVkFMSURBVElPTilcclxuXHJcbiAgICAvLyBlbmFibGluZyB2YWxpZGF0aW9uIGJ5IGNhbGxpbmcgZW5hYmxlVmFsaWRhdGlvbigpXHJcbiAgICAvLyBwYXNzIGFsbCB0aGUgc2V0dGluZ3Mgb24gY2FsbFxyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy9BZGQgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gY2xvc2UgaWNvbiBvZiBwb3B1cFxyXG5cclxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9BZGQgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gY2xvc2UgdG8gYXJlYSBvZiBwYWdlIHNoYWRlZCBncmF5IHRvIGNsb3NlIHBvcHVwXHJcblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgc3VibWl0VHlwZSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3N1Ym1pdFR5cGUgPSBzdWJtaXRUeXBlO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnJlZHVjZShcclxuICAgICAgKGFjY3VtdWxhdG9yLCBpbnB1dE5vZGUpID0+ICh7XHJcbiAgICAgICAgLi4uYWNjdW11bGF0b3IsXHJcbiAgICAgICAgW2lucHV0Tm9kZS5uYW1lXTogaW5wdXROb2RlLnZhbHVlLFxyXG4gICAgICB9KSxcclxuICAgICAge31cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBsb2FkaW5nQnV0dG9uU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IGAke3RoaXMuX3N1Ym1pdFR5cGV9YDtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1HRU5FUklDIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVBST0ZJTEUgRURJVCBNT0RBTCBFTEVNRU5UUy0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hYm91dFwiKTtcclxuY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hdmF0YXJcIik7XHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1waWN0dXJlLWVkaXQtYnRuXCJcclxuKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1waWN0dXJlLWZvcm1cIik7XHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlU3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLXBpY3R1cmUtc3VibWl0LWJ0blwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlRm9ybUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLXBpY3R1cmUtaW5wdXRcIlxyXG4pO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtZm9ybVwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1QUk9GSUxFIEFERCBNT0RBTCBFTEVNRU5UUy0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IGFkZENhcmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ0blwiKTtcclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1tb2RhbFwiKTtcclxuY29uc3QgYWRkQ2FyZFN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtYnRuXCIpO1xyXG5jb25zdCBjYXJkQWRkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLWZvcm1cIik7XHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gY2FyZEFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgY2FyZFVybElucHV0ID0gY2FyZEFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC11cmwtaW5wdXRcIik7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tVkFMSURBVElPTiBPUFRJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUFQSSBPUFRJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYXBpT3B0aW9ucyA9IHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI5N2Y2YjQ0My0wOGRkLTRmMWMtOTE4OS0wMjViMzE4YjE4NWRcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBjYXJkTGlzdCxcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQWJvdXQsXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBwcm9maWxlUGljdHVyZUVkaXRCdG4sXHJcbiAgcHJvZmlsZVBpY3R1cmVFZGl0Rm9ybSxcclxuICBwcm9maWxlUGljdHVyZVN1Ym1pdEJ0bixcclxuICBwcm9maWxlUGljdHVyZUZvcm1JbnB1dCxcclxuICBwcm9maWxlRWRpdEJ0bixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkQ2FyZEJ0bixcclxuICBjYXJkQWRkRm9ybSxcclxuICBhZGRDYXJkU3VibWl0QnRuLFxyXG4gIGNhcmRUaXRsZUlucHV0LFxyXG4gIGNhcmRVcmxJbnB1dCxcclxuICBvcHRpb25zLFxyXG4gIGFwaU9wdGlvbnMsXHJcbn07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBjYXJkTGlzdCxcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQWJvdXQsXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBwcm9maWxlUGljdHVyZUVkaXRCdG4sXHJcbiAgcHJvZmlsZVBpY3R1cmVFZGl0Rm9ybSxcclxuICBwcm9maWxlUGljdHVyZVN1Ym1pdEJ0bixcclxuICBwcm9maWxlUGljdHVyZUZvcm1JbnB1dCxcclxuICBwcm9maWxlRWRpdEJ0bixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkQ2FyZEJ0bixcclxuICBjYXJkQWRkRm9ybSxcclxuICBhZGRDYXJkU3VibWl0QnRuLFxyXG4gIGNhcmRUaXRsZUlucHV0LFxyXG4gIGNhcmRVcmxJbnB1dCxcclxuICBvcHRpb25zLFxyXG4gIGFwaU9wdGlvbnMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUFQSSBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlPcHRpb25zKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1WQUxJREFUSU9OIElOU1RBTlRJQVRPUlMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5jb25zdCBhZGRDYXJkVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIGNhcmRBZGRGb3JtKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgb3B0aW9ucyxcclxuICBwcm9maWxlUGljdHVyZUVkaXRGb3JtXHJcbik7XHJcblxyXG5wcm9maWxlRWRpdFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRDYXJkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnByb2ZpbGVQaWN0dXJlVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tUE9QVVBXSVRISU1BR0UgSU5TVEFOVElBVElPTi0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjY2FyZC1wcmV2aWV3LW1vZGFsXCIpO1xyXG5cclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUNBUkRTRUNUSU9OIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgY29uc3QgbmV3Q2FyZCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNhcmRMaXN0XHJcbik7XHJcblxyXG5hcGlcclxuICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbigoY2FyZERhdGEpID0+IHtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmREYXRhKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tVVNFUi1JTkZPIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICBcIiNwcm9maWxlLW5hbWVcIixcclxuICBcIiNwcm9maWxlLWFib3V0XCIsXHJcbiAgXCIjcHJvZmlsZS1hdmF0YXJcIlxyXG4pO1xyXG5cclxuYXBpXHJcbiAgLmdldFVzZXJJbmZvKClcclxuICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhLm5hbWUsIHVzZXJEYXRhLmFib3V0KTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tIEVESVQgUFJPRklMRSBQT1BVUC1XSVRILUZPUk0gSU5TVEFOVElBVElPTi0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gICh2YWx1ZXMpID0+IHtcclxuICAgIGVkaXRNb2RhbC5sb2FkaW5nQnV0dG9uU3RhdGUoKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0VXNlckluZm8oeyBuYW1lOiB2YWx1ZXMubmFtZSwgYWJvdXQ6IHZhbHVlcy5qb2IgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xyXG4gICAgICAgIGVkaXRNb2RhbC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGVkaXRNb2RhbC5yZXNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbiAgXCJTYXZlXCJcclxuKTtcclxuXHJcbmVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gam9iO1xyXG5cclxuICBlZGl0TW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1QUk9GSUxFIFBJQ1RVUkUgUE9QVVAtV0lUSC1GT1JNIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBwcm9maWxlUGljdHVyZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1waWN0dXJlLWVkaXQtbW9kYWxcIixcclxuICAodmFsdWVzKSA9PiB7XHJcbiAgICBwcm9maWxlUGljdHVyZU1vZGFsLmxvYWRpbmdCdXR0b25TdGF0ZSgpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5zZXRQcm9maWxlUGljdHVyZSh2YWx1ZXMudXJsKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKTtcclxuICAgICAgICBwcm9maWxlUGljdHVyZU1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgcHJvZmlsZVBpY3R1cmVWYWxpZGF0aW9uLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwcm9maWxlUGljdHVyZU1vZGFsLnJlc2V0QnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxuICBcIlNhdmVcIlxyXG4pO1xyXG5cclxucHJvZmlsZVBpY3R1cmVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZVBpY3R1cmVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZVBpY3R1cmVNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUFERCBDQVJEIFBPUFVQLVdJVEgtRk9STSBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYWRkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWFkZC1tb2RhbFwiLFxyXG4gICh7IHRpdGxlLCB1cmwgfSkgPT4ge1xyXG4gICAgYWRkTW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZE5ld0NhcmQoeyBuYW1lOiB0aXRsZSwgbGluazogdXJsIH0pXHJcbiAgICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxuICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gICAgICAgIGFkZE1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgYWRkQ2FyZFZhbGlkYXRpb24uZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGFkZE1vZGFsLnJlc2V0QnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxuICBcIkNyZWF0ZVwiXHJcbik7XHJcblxyXG5hZGRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYWRkQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tREVMRVRFIENBUkQgUE9QVVAgSU5TVEFOVElBVElPTi0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmNvbnN0IGRlbGV0ZU1vZGFsID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNjYXJkLWRlbGV0ZS1tb2RhbFwiKTtcclxuXHJcbmRlbGV0ZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tRlVOQ1RJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGRhdGEsXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGltYWdlUG9wdXAub3BlbihkYXRhKTtcclxuICAgIH0sXHJcbiAgICBkZWxldGVNb2RhbCxcclxuICAgICgpID0+IHtcclxuICAgICAgY29uc3QgaWQgPSBjYXJkRWxlbWVudC5nZXRJZCgpO1xyXG5cclxuICAgICAgZGVsZXRlTW9kYWwub3BlbigpO1xyXG5cclxuICAgICAgZGVsZXRlTW9kYWwuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICBkZWxldGVNb2RhbC5sb2FkaW5nQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuZGVsZXRlQ2FyZChpZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnQuZGVsZXRlSGFuZGxlcigpO1xyXG4gICAgICAgICAgICBkZWxldGVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZU1vZGFsLnJlc2V0QnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkID0gY2FyZEVsZW1lbnQuZ2V0SWQoKTtcclxuXHJcbiAgICAgIGlmICghZGF0YS5pc0xpa2VkKSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuYWRkQ2FyZExpa2UoaWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50Lmxpa2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAucmVtb3ZlQ2FyZExpa2UoaWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50Lmxpa2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXROZXdDYXJkKCk7XHJcbn1cclxuIiwiaW1wb3J0IHsgYXBpT3B0aW9ucyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBhcGlPcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9iYXNlSGVhZGVycyA9IGFwaU9wdGlvbnMuaGVhZGVycztcclxuICAgIHRoaXMuX3VzZXJQYXRoID0gYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgO1xyXG4gICAgdGhpcy5fY2FyZFBhdGggPSBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2A7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBsb2dFcnJvcihlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9XHJcblxyXG4gIHJldHVyblByb21pc2VzKFtwcm9taXNlMSwgcHJvbWlzZTJdKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3Byb21pc2UxLCBwcm9taXNlMl0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2NhcmRQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2NhcmRQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2NhcmRQYXRofS8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fY2FyZFBhdGh9LyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9jYXJkUGF0aH0vJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VzZXJQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXNlclBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFByb2ZpbGVQaWN0dXJlKGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91c2VyUGF0aH0vYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjY2FyZC1wcmV2aWV3LWltYWdlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9wcmV2aWV3VGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjY2FyZC1wcmV2aWV3LXRpdGxlXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuID0gKHsgbmFtZSwgbGluayB9KSA9PiB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBgJHtuYW1lfWA7XHJcbiAgICB0aGlzLl9wcmV2aWV3VGl0bGUudGV4dENvbnRlbnQgPSBgJHtuYW1lfWA7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZSwgcHJvZmlsZUpvYiwgcHJvZmlsZUF2YXRhcikge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVKb2IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUF2YXRhcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdXNlckluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihkYXRhKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGRhdGE7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm0tZGVsZXRlLWZvcm1cIik7XHJcbiAgICB0aGlzLl9jb25maXJtQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLWNhcmQtYnRuXCIpO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgbG9hZGluZ0J1dHRvblN0YXRlKCkge1xyXG4gICAgdGhpcy5fY29uZmlybUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuICB9XHJcblxyXG4gIHJlc2V0QnV0dG9uU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9jb25maXJtQnRuLnRleHRDb250ZW50ID0gXCJZZXNcIjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJjbGlja0hhbmRsZXIiLCJkZWxldGVQb3B1cCIsImhhbmRsZURlbGV0ZSIsImhhbmRsZUxpa2UiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9jbGlja0hhbmRsZXIiLCJfZGVsZXRlUG9wdXAiLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZUxpa2UiLCJnZXRJZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJsaWtlSGFuZGxlciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImRlbGV0ZUhhbmRsZXIiLCJyZW1vdmUiLCJnZXROZXdDYXJkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJhbHQiLCJzcmMiLCJ0ZXh0Q29udGVudCIsImFkZCIsIkZvcm1WYWxpZGF0b3IiLCJvcHRpb25zIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrVmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZGlzYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9jaGFuZ2VCdXR0b25TdGF0ZSIsImZvdW5kSW52YWxpZCIsIl9pbnB1dEVsZW1lbnRzIiwiZm9yRWFjaCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldmVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VibWl0VHlwZSIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdFR5cGUiLCJfc3VibWl0QnRuIiwiX2dldElucHV0VmFsdWVzIiwicmVkdWNlIiwiYWNjdW11bGF0b3IiLCJpbnB1dE5vZGUiLCJ2YWx1ZSIsInJlc2V0IiwibG9hZGluZ0J1dHRvblN0YXRlIiwicmVzZXRCdXR0b25TdGF0ZSIsImNhcmRMaXN0IiwicHJvZmlsZVBpY3R1cmVFZGl0QnRuIiwicHJvZmlsZVBpY3R1cmVFZGl0Rm9ybSIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImFkZENhcmRCdG4iLCJhZGRDYXJkTW9kYWwiLCJjYXJkQWRkRm9ybSIsImFwaU9wdGlvbnMiLCJiYXNlVXJsIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJhcGkiLCJfYmFzZVVybCIsIl9iYXNlSGVhZGVycyIsIl91c2VyUGF0aCIsIl9jYXJkUGF0aCIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImxvZ0Vycm9yIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwicmV0dXJuUHJvbWlzZXMiLCJwcm9taXNlMSIsInByb21pc2UyIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiYWRkTmV3Q2FyZCIsIl9yZWYyIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwiYWRkQ2FyZExpa2UiLCJyZW1vdmVDYXJkTGlrZSIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJfcmVmMyIsImFib3V0Iiwic2V0UHJvZmlsZVBpY3R1cmUiLCJhdmF0YXIiLCJwcm9maWxlRWRpdFZhbGlkYXRpb24iLCJhZGRDYXJkVmFsaWRhdGlvbiIsInByb2ZpbGVQaWN0dXJlVmFsaWRhdGlvbiIsImltYWdlUG9wdXAiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdUaXRsZSIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImNhcmREYXRhIiwibmV3Q2FyZCIsInJlbmRlckNhcmQiLCJjYXRjaCIsInVzZXJJbmZvIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwicHJvZmlsZUF2YXRhciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiX3Byb2ZpbGVBdmF0YXIiLCJqb2IiLCJzZXRVc2VyQXZhdGFyIiwiZGF0YSIsInVzZXJEYXRhIiwiZWRpdE1vZGFsIiwidmFsdWVzIiwiZmluYWxseSIsInByb2ZpbGVQaWN0dXJlTW9kYWwiLCJ1cmwiLCJhZGRNb2RhbCIsInRpdGxlIiwiZGVsZXRlTW9kYWwiLCJfY29uZmlybUJ0biIsInNldFN1Ym1pdEFjdGlvbiIsImNhcmRFbGVtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==