!function(){"use strict";class e{constructor(e,t,r,s,n,i){let{name:o,link:a,_id:l,isLiked:c}=e;this._name=o,this._link=a,this._id=l,this._isLiked=c,this._cardSelector=t,this._clickHandler=r,this._deletePopup=s,this._handleDelete=n,this._handleLike=i}getId(){return this._id}_setEventListeners(){this._cardElement.querySelector(".card__button-like").addEventListener("click",(()=>{this._handleLike()})),this._cardElement.querySelector(".card__button-delete").addEventListener("click",(()=>{this._handleDelete()})),this._cardImageElement.addEventListener("click",(()=>{this._clickHandler({name:this._name,link:this._link})}))}likeHandler(){this._cardElement.querySelector(".card__button-like").classList.toggle("card__button-like_active")}deleteHandler(){this._cardElement.remove(),this._cardElement=null}getNewCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._cardImageElement.alt=this._name,this._cardImageElement.src=this._link,this._cardTitleElement.textContent=this._name,this._isLiked&&this._cardElement.querySelector(".card__button-like").classList.add("card__button-like_active"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.add(this._errorClass)}_hideInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.remove(this._errorClass)}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_changeButtonState(){let e=!1;this._inputElements.forEach((t=>{t.validity.valid||(e=!0)})),e?this._disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkValidity(e),this._changeButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&(e.preventDefault(),this.close())};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class s extends r{constructor(e,t,r){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitType=r,this._submitBtn=this._popupElement.querySelector(".modal__button")}getInputValues(){return Array.from(this._popupForm.querySelectorAll(".modal__input")).reduce(((e,t)=>({...e,[t.name]:t.value})),{})}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this.getInputValues())})),super.setEventListeners()}loadingButtonState(){this._submitBtn.textContent="Saving..."}resetButtonState(){this._submitBtn.textContent=`${this._submitType}`}}const n=document.querySelector(".cards__list"),i=(document.querySelector("#profile-name"),document.querySelector("#profile-about"),document.querySelector("#profile-avatar"),document.querySelector("#profile-picture-edit-btn")),o=document.querySelector("#profile-picture-form"),a=document.querySelector("#profile-picture-submit-btn"),l=(document.querySelector("#profile-picture-input"),document.querySelector("#profile-edit-btn")),c=document.querySelector("#profile-edit-form"),d=document.querySelector("#profile-title-input"),u=document.querySelector("#profile-description-input"),h=document.querySelector("#profile-add-btn"),_=document.querySelector("#profile-add-modal"),m=document.querySelector("#add-card-btn"),p=_.querySelector("#card-add-form"),E=(p.querySelector("#profile-add-title-input"),p.querySelector("#profile-add-url-input"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error",errorClass:"modal__error_visible"}),f={baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"97f6b443-08dd-4f1c-9189-025b318b185d","Content-Type":"application/json"}},b=new class{constructor(){this._baseUrl=f.baseUrl,this._baseHeaders=f.headers,this._userPath=`${this._baseUrl}/users/me`,this._cardPath=`${this._baseUrl}/cards`}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}logError(e){console.error(e)}returnPromises(e){let[t,r]=e;return Promise.all([t,r])}getInitialCards(){return fetch(this._cardPath,{method:"GET",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}addNewCard(e){let{name:t,link:r}=e;return fetch(this._cardPath,{method:"POST",headers:this._baseHeaders,body:JSON.stringify({name:t,link:r})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch(`${this._cardPath}/${e}`,{method:"DELETE",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}addCardLike(e){return fetch(`${this._cardPath}/${e}/likes`,{method:"PUT",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}removeCardLike(e){return fetch(`${this._cardPath}/${e}/likes`,{method:"DELETE",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch(this._userPath,{method:"GET",headers:this._baseHeaders}).then((e=>this._checkResponse(e)))}setUserInfo(e){let{name:t,about:r}=e;return fetch(this._userPath,{method:"PATCH",headers:this._baseHeaders,body:JSON.stringify({name:t,about:r})}).then((e=>this._checkResponse(e)))}setProfilePicture(e){return fetch(`${this._userPath}/avatar`,{method:"PATCH",headers:this._baseHeaders,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponse(e)))}}(f),S=new class extends r{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#card-preview-image"),this._previewTitle=this._popupElement.querySelector("#card-preview-title")}open=e=>{let{name:t,link:r}=e;this._previewImage.src=r,this._previewImage.alt=`${t}`,this._previewTitle.textContent=`${t}`,super.open()}}("#card-preview-modal");S.setEventListeners();const v=new class{constructor(e,t){let{renderer:r}=e;this._renderer=r,this._container=t}renderItems(e){e.forEach((e=>(this._renderer(e),e)))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=q(e);v.addItem(t)}},n);b.getInitialCards().then((e=>{v.renderItems(e)})).catch((e=>{console.error(e)}));const y=new class{constructor(e,t,r){this._profileName=document.querySelector(e),this._profileJob=document.querySelector(t),this._profileAvatar=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}setUserAvatar(e){this._profileAvatar.src=e}}("#profile-name","#profile-about","#profile-avatar");b.getUserInfo().then((e=>{y.setUserInfo(e.name,e.about),y.setUserAvatar(e.avatar)})).catch((e=>{console.error(e)}));const k=new s("#profile-edit-modal",(e=>{k.loadingButtonState(),b.setUserInfo({name:e.name,about:e.job}).then((e=>{y.setUserInfo(e.name,e.about),k.close()})).catch((e=>{console.error(e)})).finally((()=>{k.resetButtonState()}))}),"Save");k.setEventListeners(),l.addEventListener("click",(()=>{const{name:e,job:t}=y.getUserInfo();d.value=e,u.value=t,k.open()}));const L=new s("#profile-picture-edit-modal",(()=>{const e=L.getInputValues();L.loadingButtonState(),b.setProfilePicture(e.url).then((e=>{y.setUserAvatar(e.avatar),L.close(),a.classList.add("modal__button_disabled")})).catch((e=>{console.error(e)})).finally((()=>{L.resetButtonState()}))}),"Save");L.setEventListeners(),i.addEventListener("click",(()=>{L.open()}));const C=new s("#profile-add-modal",(e=>{let{title:t,url:r}=e;C.loadingButtonState(),b.addNewCard({name:t,link:r}).then((e=>{const t=q(e);v.addItem(t),C.close(),m.classList.add("modal__button_disabled")})).catch((e=>{console.error(e)})).finally((()=>{C.resetButtonState()}))}),"Create");C.setEventListeners(),h.addEventListener("click",(()=>{C.open()}));const g=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#confirm-delete-form"),this._confirmBtn=this._popupElement.querySelector("#delete-card-btn")}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()})),super.setEventListeners()}loadingButtonState(){this._confirmBtn.textContent="Deleting..."}resetButtonState(){this._confirmBtn.textContent="Yes"}}("#card-delete-modal");function q(t){const r=new e(t,"#card-template",(()=>{S.open(t)}),g,(()=>{const e=r.getId();g.open(),g.setSubmitAction((()=>{g.loadingButtonState(),b.deleteCard(e).then((()=>{r.deleteHandler(),g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.resetButtonState()}))}))}),(()=>{const e=r.getId();t.isLiked?b.removeCardLike(e).then((()=>{r.likeHandler()})).catch((e=>{console.error(e)})):b.addCardLike(e).then((()=>{r.likeHandler()})).catch((e=>{console.error(e)}))}));return r.getNewCard()}g.setEventListeners();const B=new t(E,c),I=new t(E,p),w=new t(E,o);B.enableValidation(),I.enableValidation(),w.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixFQUFJLEdBV3hCLElBR0osT0FBT2dFLEVBQVl0SyxZQUNyQixDQTNEQW1LLEVBQVk3RyxvQkErRFosTUFBTWlILEVBQXdCLElBQUk5SixFQUFjQyxFQUFTb0UsR0FDbkQwRixFQUFvQixJQUFJL0osRUFBY0MsRUFBUzBFLEdBQy9DcUYsRUFBMkIsSUFBSWhLLEVBQ25DQyxFQUNBaUUsR0FHRjRGLEVBQXNCM0gsbUJBQ3RCNEgsRUFBa0I1SCxtQkFDbEI2SCxFQUF5QjdILGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmRfdGhlX3VzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kX3RoZV91cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZF90aGVfdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgY2xpY2tIYW5kbGVyLFxyXG4gICAgZGVsZXRlUG9wdXAsXHJcbiAgICBoYW5kbGVEZWxldGUsXHJcbiAgICBoYW5kbGVMaWtlXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faWQgPSBfaWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NsaWNrSGFuZGxlciA9IGNsaWNrSGFuZGxlcjtcclxuICAgIHRoaXMuX2RlbGV0ZVBvcHVwID0gZGVsZXRlUG9wdXA7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlID0gaGFuZGxlTGlrZTtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsZXRlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NsaWNrSGFuZGxlcih7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tbGlrZV9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXROZXdDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAvLyBGaXJzdCBwYXJhbWV0ZXIgc3RvcmVzIHNlbGVjdG9ycyBhbmQgZm9ybSBjbGFzc2VzXHJcbiAgLy8gU2Vjb25kIHRha2VzIHRoZSBmb3JtIGJlaW5nIHZhbGlkYXRlZFxyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gb3B0aW9ucy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIC8vIGxvb2sgZm9yIGlucHV0cyBpbnNpZGUgb2YgZm9ybVxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICAvLyBnZXQgdmFsaWRhdGlvbiBtZXNzYWdlXHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIC8vIGFkZCBlcnJvciBjbGFzcyB0byBpbnB1dFxyXG4gICAgLy8gZGlzcGxheSBlcnJvciBtZXNzYWdlXHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAvLyBsb29rIGZvciBpbnB1dHMgaW5zaWRlIG9mIGZvcm1cclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgLy8gcmVzZXQgZXJyb3IgbWVzc2FnZXNcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICAvLyBDaGVjayB2YWxpZGl0eSBvZiBzcGVjaWZpYyBmb3JtXHJcbiAgICAvLyBsb29wIHRocm91Z2ggYWxsIHRoZSBpbnB1dHMgdG8gc2VlIGlmIGFsbCBhcmUgdmFsaWRcclxuXHJcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIC8vIGlmIGlucHV0IGlzIG5vdCB2YWxpZFxyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBpZiBhbGwgaW5wdXRzIGFyZSB2YWxpZFxyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9jaGFuZ2VCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIENoYW5nZSBzdWJtaXQgYnV0dG9uIHN0YXRlIGFzIG5lZWRlZFxyXG5cclxuICAgIGxldCBmb3VuZEludmFsaWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIGZvdW5kSW52YWxpZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChmb3VuZEludmFsaWQpIHtcclxuICAgICAgLy8gZGlzYWJsZSBidXR0b25cclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gZW5hYmxlIGJ1dHRvblxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIEFkZCBhbGwgbmVlZGVkIGV2ZW50IGhhbmRsZXJzXHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIC8vIEVuYWJsZSB2YWxpZGF0aW9uIG9mIGVhY2ggZm9ybVxyXG4gICAgLy8gKERPIFRISVMgRk9SIEVBQ0ggRk9STSBORUVESU5HIFZBTElEQVRJT04pXHJcblxyXG4gICAgLy8gZW5hYmxpbmcgdmFsaWRhdGlvbiBieSBjYWxsaW5nIGVuYWJsZVZhbGlkYXRpb24oKVxyXG4gICAgLy8gcGFzcyBhbGwgdGhlIHNldHRpbmdzIG9uIGNhbGxcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vQWRkIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIGNsb3NlIGljb24gb2YgcG9wdXBcclxuXHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vQWRkIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIGNsb3NlIHRvIGFyZWEgb2YgcGFnZSBzaGFkZWQgZ3JheSB0byBjbG9zZSBwb3B1cFxyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIHN1Ym1pdFR5cGUpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRUeXBlID0gc3VibWl0VHlwZTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnJlZHVjZShcclxuICAgICAgKGFjY3VtdWxhdG9yLCBpbnB1dE5vZGUpID0+ICh7XHJcbiAgICAgICAgLi4uYWNjdW11bGF0b3IsXHJcbiAgICAgICAgW2lucHV0Tm9kZS5uYW1lXTogaW5wdXROb2RlLnZhbHVlLFxyXG4gICAgICB9KSxcclxuICAgICAge31cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGxvYWRpbmdCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgfVxyXG5cclxuICByZXNldEJ1dHRvblN0YXRlKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gYCR7dGhpcy5fc3VibWl0VHlwZX1gO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUdFTkVSSUMgRUxFTUVOVFMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tUFJPRklMRSBFRElUIE1PREFMIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFib3V0XCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhclwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLXBpY3R1cmUtZWRpdC1idG5cIlxyXG4pO1xyXG5jb25zdCBwcm9maWxlUGljdHVyZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXBpY3R1cmUtZm9ybVwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVTdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtcGljdHVyZS1zdWJtaXQtYnRuXCJcclxuKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVGb3JtSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtcGljdHVyZS1pbnB1dFwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVBST0ZJTEUgQUREIE1PREFMIEVMRU1FTlRTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYWRkQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnRuXCIpO1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIpO1xyXG5jb25zdCBhZGRDYXJkU3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1idG5cIik7XHJcbmNvbnN0IGNhcmRBZGRGb3JtID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtZm9ybVwiKTtcclxuY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBjYXJkQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBjYXJkVXJsSW5wdXQgPSBjYXJkQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLXVybC1pbnB1dFwiKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1WQUxJREFUSU9OIE9QVElPTlMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBvcHRpb25zID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tQVBJIE9QVElPTlMtLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBhcGlPcHRpb25zID0ge1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjk3ZjZiNDQzLTA4ZGQtNGYxYy05MTg5LTAyNWIzMThiMTg1ZFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIGNhcmRMaXN0LFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVBYm91dCxcclxuICBwcm9maWxlQXZhdGFyLFxyXG4gIHByb2ZpbGVQaWN0dXJlRWRpdEJ0bixcclxuICBwcm9maWxlUGljdHVyZUVkaXRGb3JtLFxyXG4gIHByb2ZpbGVQaWN0dXJlU3VibWl0QnRuLFxyXG4gIHByb2ZpbGVQaWN0dXJlRm9ybUlucHV0LFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybSxcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBhZGRDYXJkQnRuLFxyXG4gIGNhcmRBZGRGb3JtLFxyXG4gIGFkZENhcmRTdWJtaXRCdG4sXHJcbiAgY2FyZFRpdGxlSW5wdXQsXHJcbiAgY2FyZFVybElucHV0LFxyXG4gIG9wdGlvbnMsXHJcbiAgYXBpT3B0aW9ucyxcclxufTtcclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIGNhcmRMaXN0LFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVBYm91dCxcclxuICBwcm9maWxlQXZhdGFyLFxyXG4gIHByb2ZpbGVQaWN0dXJlRWRpdEJ0bixcclxuICBwcm9maWxlUGljdHVyZUVkaXRGb3JtLFxyXG4gIHByb2ZpbGVQaWN0dXJlU3VibWl0QnRuLFxyXG4gIHByb2ZpbGVQaWN0dXJlRm9ybUlucHV0LFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybSxcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBhZGRDYXJkQnRuLFxyXG4gIGNhcmRBZGRGb3JtLFxyXG4gIGFkZENhcmRTdWJtaXRCdG4sXHJcbiAgY2FyZFRpdGxlSW5wdXQsXHJcbiAgY2FyZFVybElucHV0LFxyXG4gIG9wdGlvbnMsXHJcbiAgYXBpT3B0aW9ucyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tQVBJIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaU9wdGlvbnMpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVBPUFVQV0lUSElNQUdFIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmQtcHJldmlldy1tb2RhbFwiKTtcclxuXHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS1DQVJEU0VDVElPTiBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjYXJkTGlzdFxyXG4pO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkRGF0YSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVVTRVItSU5GTyBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgXCIjcHJvZmlsZS1uYW1lXCIsXHJcbiAgXCIjcHJvZmlsZS1hYm91dFwiLFxyXG4gIFwiI3Byb2ZpbGUtYXZhdGFyXCJcclxuKTtcclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLSBFRElUIFBST0ZJTEUgUE9QVVAtV0lUSC1GT1JNIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBlZGl0TW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICAodmFsdWVzKSA9PiB7XHJcbiAgICBlZGl0TW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcbiAgICBhcGlcclxuICAgICAgLnNldFVzZXJJbmZvKHsgbmFtZTogdmFsdWVzLm5hbWUsIGFib3V0OiB2YWx1ZXMuam9iIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmFib3V0KTtcclxuICAgICAgICBlZGl0TW9kYWwuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBlZGl0TW9kYWwucmVzZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIFwiU2F2ZVwiXHJcbik7XHJcblxyXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcblxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGpvYjtcclxuXHJcbiAgZWRpdE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tUFJPRklMRSBQSUNUVVJFIFBPUFVQLVdJVEgtRk9STSBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgcHJvZmlsZVBpY3R1cmVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtcGljdHVyZS1lZGl0LW1vZGFsXCIsXHJcbiAgKCkgPT4ge1xyXG4gICAgY29uc3QgdmFsdWVzID0gcHJvZmlsZVBpY3R1cmVNb2RhbC5nZXRJbnB1dFZhbHVlcygpO1xyXG5cclxuICAgIHByb2ZpbGVQaWN0dXJlTW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcbiAgICBhcGlcclxuICAgICAgLnNldFByb2ZpbGVQaWN0dXJlKHZhbHVlcy51cmwpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlTW9kYWwuY2xvc2UoKTtcclxuICAgICAgICBwcm9maWxlUGljdHVyZVN1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwcm9maWxlUGljdHVyZU1vZGFsLnJlc2V0QnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxuICBcIlNhdmVcIlxyXG4pO1xyXG5cclxucHJvZmlsZVBpY3R1cmVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZVBpY3R1cmVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZVBpY3R1cmVNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUFERCBDQVJEIFBPUFVQLVdJVEgtRk9STSBJTlNUQU5USUFUSU9OLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgYWRkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWFkZC1tb2RhbFwiLFxyXG4gICh7IHRpdGxlLCB1cmwgfSkgPT4ge1xyXG4gICAgYWRkTW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZE5ld0NhcmQoeyBuYW1lOiB0aXRsZSwgbGluazogdXJsIH0pXHJcbiAgICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxuICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gICAgICAgIGFkZE1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgYWRkQ2FyZFN1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBhZGRNb2RhbC5yZXNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbiAgXCJDcmVhdGVcIlxyXG4pO1xyXG5cclxuYWRkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLURFTEVURSBDQVJEIFBPUFVQIElOU1RBTlRJQVRJT04tLS0tLS0tLS0tLS0tLS0tLS0tLT4+XHJcblxyXG5jb25zdCBkZWxldGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjY2FyZC1kZWxldGUtbW9kYWxcIik7XHJcblxyXG5kZWxldGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLUZVTkNUSU9OUy0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBkYXRhLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgKCkgPT4ge1xyXG4gICAgICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XHJcbiAgICB9LFxyXG4gICAgZGVsZXRlTW9kYWwsXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkID0gY2FyZEVsZW1lbnQuZ2V0SWQoKTtcclxuXHJcbiAgICAgIGRlbGV0ZU1vZGFsLm9wZW4oKTtcclxuXHJcbiAgICAgIGRlbGV0ZU1vZGFsLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlTW9kYWwubG9hZGluZ0J1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmRlbGV0ZUNhcmQoaWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LmRlbGV0ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgZGVsZXRlTW9kYWwuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGVNb2RhbC5yZXNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpZCA9IGNhcmRFbGVtZW50LmdldElkKCk7XHJcblxyXG4gICAgICBpZiAoIWRhdGEuaXNMaWtlZCkge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmFkZENhcmRMaWtlKGlkKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkRWxlbWVudC5saWtlSGFuZGxlcigpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLnJlbW92ZUNhcmRMaWtlKGlkKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkRWxlbWVudC5saWtlSGFuZGxlcigpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0TmV3Q2FyZCgpO1xyXG59XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tVkFMSURBVElPTiBJTlNUQU5USUFUT1JTLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlxyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgcHJvZmlsZUVkaXRGb3JtKTtcclxuY29uc3QgYWRkQ2FyZFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBjYXJkQWRkRm9ybSk7XHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIG9wdGlvbnMsXHJcbiAgcHJvZmlsZVBpY3R1cmVFZGl0Rm9ybVxyXG4pO1xyXG5cclxucHJvZmlsZUVkaXRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkQ2FyZFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5wcm9maWxlUGljdHVyZVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJpbXBvcnQgeyBhcGlPcHRpb25zIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGFwaU9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2Jhc2VIZWFkZXJzID0gYXBpT3B0aW9ucy5oZWFkZXJzO1xyXG4gICAgdGhpcy5fdXNlclBhdGggPSBgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWA7XHJcbiAgICB0aGlzLl9jYXJkUGF0aCA9IGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYDtcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGxvZ0Vycm9yKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuUHJvbWlzZXMoW3Byb21pc2UxLCBwcm9taXNlMl0pIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbcHJvbWlzZTEsIHByb21pc2UyXSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZFBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZFBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fY2FyZFBhdGh9LyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9jYXJkUGF0aH0vJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Jhc2VIZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2NhcmRQYXRofS8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXNlclBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl91c2VyUGF0aCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fYmFzZUhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0UHJvZmlsZVBpY3R1cmUobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VzZXJQYXRofS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9iYXNlSGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNjYXJkLXByZXZpZXctaW1hZ2VcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3ByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNjYXJkLXByZXZpZXctdGl0bGVcIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9wZW4gPSAoeyBuYW1lLCBsaW5rIH0pID0+IHtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IGAke25hbWV9YDtcclxuICAgIHRoaXMuX3ByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IGAke25hbWV9YDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gIH1cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9KTtcclxuICB9XHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHByb2ZpbGVOYW1lLCBwcm9maWxlSm9iLCBwcm9maWxlQXZhdGFyKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWUpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYik7XHJcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm8gPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB1c2VySW5mbztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gZGF0YTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtZm9ybVwiKTtcclxuICAgIHRoaXMuX2NvbmZpcm1CdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtY2FyZC1idG5cIik7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBsb2FkaW5nQnV0dG9uU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9jb25maXJtQnRuLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRCdXR0b25TdGF0ZSgpIHtcclxuICAgIHRoaXMuX2NvbmZpcm1CdG4udGV4dENvbnRlbnQgPSBcIlllc1wiO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImNsaWNrSGFuZGxlciIsImRlbGV0ZVBvcHVwIiwiaGFuZGxlRGVsZXRlIiwiaGFuZGxlTGlrZSIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2lzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2NsaWNrSGFuZGxlciIsIl9kZWxldGVQb3B1cCIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlTGlrZSIsImdldElkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZEltYWdlRWxlbWVudCIsImxpa2VIYW5kbGVyIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZGVsZXRlSGFuZGxlciIsInJlbW92ZSIsImdldE5ld0NhcmQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlRWxlbWVudCIsImFsdCIsInNyYyIsInRleHRDb250ZW50IiwiYWRkIiwiRm9ybVZhbGlkYXRvciIsIm9wdGlvbnMiLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9jaGFuZ2VCdXR0b25TdGF0ZSIsImZvdW5kSW52YWxpZCIsIl9pbnB1dEVsZW1lbnRzIiwiZm9yRWFjaCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldmVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VibWl0VHlwZSIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdFR5cGUiLCJfc3VibWl0QnRuIiwiZ2V0SW5wdXRWYWx1ZXMiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsImlucHV0Tm9kZSIsInZhbHVlIiwicmVzZXQiLCJsb2FkaW5nQnV0dG9uU3RhdGUiLCJyZXNldEJ1dHRvblN0YXRlIiwiY2FyZExpc3QiLCJwcm9maWxlUGljdHVyZUVkaXRCdG4iLCJwcm9maWxlUGljdHVyZUVkaXRGb3JtIiwicHJvZmlsZVBpY3R1cmVTdWJtaXRCdG4iLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJhZGRDYXJkQnRuIiwiYWRkQ2FyZE1vZGFsIiwiYWRkQ2FyZFN1Ym1pdEJ0biIsImNhcmRBZGRGb3JtIiwiYXBpT3B0aW9ucyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImFwaSIsIl9iYXNlVXJsIiwiX2Jhc2VIZWFkZXJzIiwiX3VzZXJQYXRoIiwiX2NhcmRQYXRoIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwibG9nRXJyb3IiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJyZXR1cm5Qcm9taXNlcyIsInByb21pc2UxIiwicHJvbWlzZTIiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJhZGROZXdDYXJkIiwiX3JlZjIiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJhZGRDYXJkTGlrZSIsInJlbW92ZUNhcmRMaWtlIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsIl9yZWYzIiwiYWJvdXQiLCJzZXRQcm9maWxlUGljdHVyZSIsImF2YXRhciIsImltYWdlUG9wdXAiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdUaXRsZSIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImNhcmREYXRhIiwibmV3Q2FyZCIsInJlbmRlckNhcmQiLCJjYXRjaCIsInVzZXJJbmZvIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwicHJvZmlsZUF2YXRhciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiX3Byb2ZpbGVBdmF0YXIiLCJqb2IiLCJzZXRVc2VyQXZhdGFyIiwiZGF0YSIsInVzZXJEYXRhIiwiZWRpdE1vZGFsIiwidmFsdWVzIiwiZmluYWxseSIsInByb2ZpbGVQaWN0dXJlTW9kYWwiLCJ1cmwiLCJhZGRNb2RhbCIsInRpdGxlIiwiZGVsZXRlTW9kYWwiLCJfY29uZmlybUJ0biIsInNldFN1Ym1pdEFjdGlvbiIsImNhcmRFbGVtZW50IiwicHJvZmlsZUVkaXRWYWxpZGF0aW9uIiwiYWRkQ2FyZFZhbGlkYXRpb24iLCJwcm9maWxlUGljdHVyZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9